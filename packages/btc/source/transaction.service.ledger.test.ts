import { IoC, Services, Signatories } from "@ardenthq/sdk";
import { DateTime } from "@ardenthq/sdk-intl";
import { describe } from "@ardenthq/sdk-test";
import { openTransportReplayer, RecordStore } from "@ledgerhq/hw-transport-mocker";

import { ledger } from "../test/fixtures/ledger";
import { createService } from "../test/mocking";
import { AddressFactory } from "./address.factory.js";
import { AddressService } from "./address.service.js";
import { ClientService } from "./client.service.js";
import { ConfirmedTransactionData } from "./confirmed-transaction.dto.js";
import { BindingType } from "./constants";
import { ExtendedPublicKeyService } from "./extended-public-key.service.js";
import { FeeService } from "./fee.service.js";
import { LedgerService } from "./ledger.service.js";
import { MultiSignatureService } from "./multi-signature.service.js";
import { MultiSignatureSigner } from "./multi-signature.signer";
import { SignedTransactionData } from "./signed-transaction.dto.js";
import { TransactionService } from "./transaction.service.js";
import { WalletData } from "./wallet.dto.js";

const configureMock = (record) =>
	createService(TransactionService, "btc.testnet", async (container) => {
		container.constant(IoC.BindingType.Container, container);
		container.singleton(BindingType.AddressFactory, AddressFactory);
		container.singleton(BindingType.MultiSignatureSigner, MultiSignatureSigner);
		container.constant(IoC.BindingType.DataTransferObjects, {
			ConfirmedTransactionData,
			SignedTransactionData,
			WalletData,
		});
		container.singleton(IoC.BindingType.DataTransferObjectService, Services.AbstractDataTransferObjectService);
		container.singleton(IoC.BindingType.AddressService, AddressService);
		container.singleton(IoC.BindingType.ClientService, ClientService);
		container.singleton(IoC.BindingType.FeeService, FeeService);
		container.singleton(IoC.BindingType.ExtendedPublicKeyService, ExtendedPublicKeyService);
		container.constant(IoC.BindingType.LedgerTransportFactory, async () =>
			openTransportReplayer(RecordStore.fromString(record)),
		);
		container.singleton(IoC.BindingType.LedgerService, LedgerService);
		container.singleton(IoC.BindingType.MultiSignatureService, MultiSignatureService);
	});

describe("BIP44 wallet", ({ beforeAll, it, assert, nock }) => {
	beforeAll(() => {
		nock.fake("https://btc-test.arkvault.io:443", { encodedQueryParams: true })
			.post(
				"/api/wallets/addresses",
				'{"addresses":["n3LhrsyE8g1Ga2XPGuXfRkaPcipevENLre","n1ii1xkSqM5zTyY4h5zpAnPi86csRbA5ar","mkEU1tHycuDj2XPcRMBWZHrBvHJXwkcBNR","my6MACmsGA3MXq73KJwnZwcNYwAYNXGGaM","mvY8me8vYkKUz8Qn3pFhionqYWDZeiC1hC","ms9QjBPWq7atAGtp4HrFRUhcuNU2QHj58z","mtkq8N81uLbazEszNZSij7ago4k6KkfjKk","mjZij3tVEKKFdyGcUTTkAVDR7jGhUfxEf7","mhub5yjwn8aktqw2C1hipdYNW83njAgymv","mjP4YPUBZZW6GaXJJ36W8gfTfxMCfuTvbP","n2khkbRh2pc8srDNeqM8uEy3n9APaL8KgV","mtBkrgNXdCX7gBVAugdtNqSq8L56EVV7Uw","mi5VbkBz7tjfg7AQ2oxxQWj78LDBzhrb3d","mhbNtdzhrxRLAuajTLYCzaec3DE79GLjwh","mhuacfeCHWSVweiu6KwDVrTGhsrnCQfTgz","mtbT1i9DnWaUMiWxUvSR42Ve56KbReKcgg","mowcx8DHsDBuhKSQ9XBpML9nZSSB2SyJDc","n2FJRGVUvWEk4rUzfJWkki5jqSg5bBwc98","n1nSwLjZ54S6k58KBwjdNDuqs1mZSCXx3z","moGqYcYarUUiLntbqEL3BBkq4XPuGBoVqN","muqrmFmmdHbbBsEqJMtL6RQm4RHPUYnFk2","mywJckScMZgPMhFmqfxGh7kDAV5cXqjX3r","mxujfFr43vVyNxLabh2F7CdFR9NAEVmUKa","muQRbM43NH5LSigqDDE1z96ygLadhUqAkS","myboc96HfByRuWpXcgvkCBaB9UUyJ9jXKK","mq5wovr1wwJpbCQHZ5T5CyftGCwze1DQDu","mktyYXvra2sribiZcBaTHxgyWqw2Jox3h9","mtJ5uCjqQ9Wi3tji6LXUyt8JhUetoYRumF","muDxFcQ4zhMKb4Zi6hYsVhkRNNZeG1CXtb","n4JzHYrRWJ4neKUs8aA3fhrdNstuzGdGRi","mpwKChjheNta7f2nfMrZtCsFVvTqnX4wu2","mvfYphsn7xAdrf8xAYDSskD5HYGe6BV8F5","mjf2x3fNeB65egmWgMhN4Uk9kCZRF6zSYF","mhC13KUAAi3M837GNu3CtmwaERKskLofS3","mpY4L4WHtXw7KSiZ6PDhZyTF5AhXK2F17X","mgUL2JxfUxtQ4yfMREqCUJDsv71SL3qav9","mz84bNXV2QHVAo82DFVzaymAWsNBn4oxXJ","mod4Whkw4T8P28ezhzmzLAqGCQTu8GXdg5","n3YrL12NVPcQdaeqxHzuNVqRGVAs8qHGfF","miEwLKjCjCLau1nNVQAsHQGjBuYgSK69dg","n42v5BSFfGZKEKDuU59yrur9eKSzg4F6QL","ms2WTyyd3QfrzouWcpmQ8LdhvwLchNogZc","mk5seBWzKpvkZayKcMmLnvfnJHH8ur4HeA","mip1uqSjVnrdNpgSxttgVdFgYRxwYNKcZP","n45q6F5LxC6VBUxdf6nuvp9ZwLGmBvSkfa","n4ZvH3QJ5b2b1yCqLCwuf2zpgtrUX1sGs2","n3rKjHbcp538Jr8n1V3PAZCbDQQyanuePZ","mr9gtRy2VAS78GejUiKgf4myszNPBHoLpV","muxcpyEWrtgAj96nQ9mUbuzQQb9ixDcFZS","mvSgDudA3dJZqA9VdXNv9rSaDBbii12odf","miUCCMdHSUMuqLakeJFnQNubCZiqtagT9V","myBsAAr9mNe1o13qXTA9RQRxVLbE1Cp96i","mt4BQPwHK9qYVyh6sE5Aq6Xm9YFyYSYTw8","mgYbtjCrroxWMbqXXQBos6dNNXfLMoG5ht","n1GtvUHv9mTU5MLcpDDydU4VwQcnvup3uB","mjaG5QmGTSkSXUCsfsRcG2CgERRFFQEfbb","myeyiLHwvy7GsTtHh6VFrRskMeZdqncSro","mx9RRciYgtqTR17CtmB8sZCuwdUesxU8X9","mxx8rKmbVh5bTmQJcip4XzZd3QSkqW44m9","mrWLJUo6HzfYQPXxMbba1Mh81FJ1jThwBV","mtgZJuqhnmzKq2Pqppyo7Bs5KXUBck9BQa","n4ZfnxeQBifbXP5VeoaDQ31eJ2YEePrAD3","mqsQmYqAttASHDRTSNtKvYt1JT95hr69hD","moHvYxq4UKhQ6rJGs3ggF6HjDC3Kt9RSd5","monmjReChadcQ28CsS2dT7cFt2voQrYDqv","mjorkR7WmVTEBprGY9pTCS7cbsSSHb48tq","msB8hgRB375MBJTL4zR89Bn2r1zYmHzVqo","mrzG17RdB7S2rWhVgaTMnmHzwpyLnrB7eE","mrvZPbrtuVtiu2JVFSPHAUeYPUrZVS3yrU","mpcNCGkruWiTCwJ9hTFHej65eEKHjYcUeQ","mjn917wD8SCTUYZekKajRRp9HP4MQL9SwK","mscG2nzgEuWyNU1f3HiWENydwPxMA5A57c","mmk4XeVpZSwJULzAEnA2hHV1eyE43QTNWb","myeA86s9hjuoNc562RqMrTQMbGKXYjW6jQ","mxovJt8LqTX1Q9t6CWy66sF5uzFJQWfhSE","mtHCRA5DQgr4d9pF3J9fPAL95cNurdRDPw","mummhXKqdB8MdS6c73MbBUb7jgPLqveXPo","mymahUdZ3LE6R926ocPjy71VcbkdFLnmtw","mr3WpZkETAM3ynUwP44sDPxjZ8X9FL5ihg","myi466NcvUwEgGiNzYeQyScNqhsNDU4JdZ","mtMQ8mWhcbrKL78yYdkGcHuU9TfCwGtDk7","mj5LmdsePJ4mbaKVSE37dof1GXeLpgrEc1","mxPtTaKJFdxDHHxqKzVZTf73CKgjcJtzAG","mjk1vbP9jzMfGc85CfTbAjxefFBwnRieo3","myR9FJitM5eDYzQvDnGXPXD7LFoXw91oAZ","n4q8fhk38s2rBfS2ZeAAiC3dfMP7X4p7F1","mpiVHCT9Fe6TCh5ZU862tpK6JhdBWoQkRs","mfsK8DnY6Px6NpxqUiCaAHHyMpaYPv67Gk","mpiQLtGkhRUQmo6kHQseAoqdq9WANgvpSJ","mx4cZn3XPRjejzC119buMKYjuRN85Vb5um","mz9VT4zPiH8vBAgKZn7Gf9VnRQstfEcnrX","miaYjb1WetR2MZK5r3zrFxRS8BA6pvrBkU","mtNHUh4G5EBe5KuWtwRsSZSnHQjiRDtMYE","mhGt72NEBz6GY5F7AqgiN1ZHu1mh3jTnU6","n4YN28XhZ9heUDWZ2tTGHmgqSW8mDVsoSr","n1cSBqiuLWygTK29maXmoPp45viXgzpXr8","mnq5grJzMVXehaMRn61Xwt7u5seqnmXcx8","mhoszJwb7jduLfgg18AKMrMBsLBq9WTpzG","mzi3gBmmhe9u8vzrabG2zyw9RYvidsvhsZ","mvzPPyHreLKmcMkm3rt24CDRiv2RfV2mJ9"]}',
			)
			.reply(
				200,
				'{"data":{"n3LhrsyE8g1Ga2XPGuXfRkaPcipevENLre":false,"n1ii1xkSqM5zTyY4h5zpAnPi86csRbA5ar":false,"mkEU1tHycuDj2XPcRMBWZHrBvHJXwkcBNR":false,"my6MACmsGA3MXq73KJwnZwcNYwAYNXGGaM":false,"mvY8me8vYkKUz8Qn3pFhionqYWDZeiC1hC":false,"ms9QjBPWq7atAGtp4HrFRUhcuNU2QHj58z":false,"mtkq8N81uLbazEszNZSij7ago4k6KkfjKk":false,"mjZij3tVEKKFdyGcUTTkAVDR7jGhUfxEf7":false,"mhub5yjwn8aktqw2C1hipdYNW83njAgymv":false,"mjP4YPUBZZW6GaXJJ36W8gfTfxMCfuTvbP":false,"n2khkbRh2pc8srDNeqM8uEy3n9APaL8KgV":false,"mtBkrgNXdCX7gBVAugdtNqSq8L56EVV7Uw":false,"mi5VbkBz7tjfg7AQ2oxxQWj78LDBzhrb3d":false,"mhbNtdzhrxRLAuajTLYCzaec3DE79GLjwh":false,"mhuacfeCHWSVweiu6KwDVrTGhsrnCQfTgz":false,"mtbT1i9DnWaUMiWxUvSR42Ve56KbReKcgg":false,"mowcx8DHsDBuhKSQ9XBpML9nZSSB2SyJDc":false,"n2FJRGVUvWEk4rUzfJWkki5jqSg5bBwc98":false,"n1nSwLjZ54S6k58KBwjdNDuqs1mZSCXx3z":false,"moGqYcYarUUiLntbqEL3BBkq4XPuGBoVqN":false,"muqrmFmmdHbbBsEqJMtL6RQm4RHPUYnFk2":false,"mywJckScMZgPMhFmqfxGh7kDAV5cXqjX3r":false,"mxujfFr43vVyNxLabh2F7CdFR9NAEVmUKa":false,"muQRbM43NH5LSigqDDE1z96ygLadhUqAkS":false,"myboc96HfByRuWpXcgvkCBaB9UUyJ9jXKK":false,"mq5wovr1wwJpbCQHZ5T5CyftGCwze1DQDu":false,"mktyYXvra2sribiZcBaTHxgyWqw2Jox3h9":false,"mtJ5uCjqQ9Wi3tji6LXUyt8JhUetoYRumF":false,"muDxFcQ4zhMKb4Zi6hYsVhkRNNZeG1CXtb":false,"n4JzHYrRWJ4neKUs8aA3fhrdNstuzGdGRi":false,"mpwKChjheNta7f2nfMrZtCsFVvTqnX4wu2":false,"mvfYphsn7xAdrf8xAYDSskD5HYGe6BV8F5":false,"mjf2x3fNeB65egmWgMhN4Uk9kCZRF6zSYF":false,"mhC13KUAAi3M837GNu3CtmwaERKskLofS3":false,"mpY4L4WHtXw7KSiZ6PDhZyTF5AhXK2F17X":false,"mgUL2JxfUxtQ4yfMREqCUJDsv71SL3qav9":false,"mz84bNXV2QHVAo82DFVzaymAWsNBn4oxXJ":false,"mod4Whkw4T8P28ezhzmzLAqGCQTu8GXdg5":false,"n3YrL12NVPcQdaeqxHzuNVqRGVAs8qHGfF":false,"miEwLKjCjCLau1nNVQAsHQGjBuYgSK69dg":false,"n42v5BSFfGZKEKDuU59yrur9eKSzg4F6QL":false,"ms2WTyyd3QfrzouWcpmQ8LdhvwLchNogZc":false,"mk5seBWzKpvkZayKcMmLnvfnJHH8ur4HeA":false,"mip1uqSjVnrdNpgSxttgVdFgYRxwYNKcZP":false,"n45q6F5LxC6VBUxdf6nuvp9ZwLGmBvSkfa":false,"n4ZvH3QJ5b2b1yCqLCwuf2zpgtrUX1sGs2":false,"n3rKjHbcp538Jr8n1V3PAZCbDQQyanuePZ":false,"mr9gtRy2VAS78GejUiKgf4myszNPBHoLpV":false,"muxcpyEWrtgAj96nQ9mUbuzQQb9ixDcFZS":false,"mvSgDudA3dJZqA9VdXNv9rSaDBbii12odf":false,"miUCCMdHSUMuqLakeJFnQNubCZiqtagT9V":false,"myBsAAr9mNe1o13qXTA9RQRxVLbE1Cp96i":false,"mt4BQPwHK9qYVyh6sE5Aq6Xm9YFyYSYTw8":false,"mgYbtjCrroxWMbqXXQBos6dNNXfLMoG5ht":false,"n1GtvUHv9mTU5MLcpDDydU4VwQcnvup3uB":false,"mjaG5QmGTSkSXUCsfsRcG2CgERRFFQEfbb":false,"myeyiLHwvy7GsTtHh6VFrRskMeZdqncSro":false,"mx9RRciYgtqTR17CtmB8sZCuwdUesxU8X9":false,"mxx8rKmbVh5bTmQJcip4XzZd3QSkqW44m9":false,"mrWLJUo6HzfYQPXxMbba1Mh81FJ1jThwBV":false,"mtgZJuqhnmzKq2Pqppyo7Bs5KXUBck9BQa":false,"n4ZfnxeQBifbXP5VeoaDQ31eJ2YEePrAD3":false,"mqsQmYqAttASHDRTSNtKvYt1JT95hr69hD":false,"moHvYxq4UKhQ6rJGs3ggF6HjDC3Kt9RSd5":false,"monmjReChadcQ28CsS2dT7cFt2voQrYDqv":false,"mjorkR7WmVTEBprGY9pTCS7cbsSSHb48tq":false,"msB8hgRB375MBJTL4zR89Bn2r1zYmHzVqo":false,"mrzG17RdB7S2rWhVgaTMnmHzwpyLnrB7eE":false,"mrvZPbrtuVtiu2JVFSPHAUeYPUrZVS3yrU":false,"mpcNCGkruWiTCwJ9hTFHej65eEKHjYcUeQ":false,"mjn917wD8SCTUYZekKajRRp9HP4MQL9SwK":false,"mscG2nzgEuWyNU1f3HiWENydwPxMA5A57c":false,"mmk4XeVpZSwJULzAEnA2hHV1eyE43QTNWb":false,"myeA86s9hjuoNc562RqMrTQMbGKXYjW6jQ":false,"mxovJt8LqTX1Q9t6CWy66sF5uzFJQWfhSE":false,"mtHCRA5DQgr4d9pF3J9fPAL95cNurdRDPw":false,"mummhXKqdB8MdS6c73MbBUb7jgPLqveXPo":false,"mymahUdZ3LE6R926ocPjy71VcbkdFLnmtw":false,"mr3WpZkETAM3ynUwP44sDPxjZ8X9FL5ihg":false,"myi466NcvUwEgGiNzYeQyScNqhsNDU4JdZ":false,"mtMQ8mWhcbrKL78yYdkGcHuU9TfCwGtDk7":false,"mj5LmdsePJ4mbaKVSE37dof1GXeLpgrEc1":false,"mxPtTaKJFdxDHHxqKzVZTf73CKgjcJtzAG":false,"mjk1vbP9jzMfGc85CfTbAjxefFBwnRieo3":false,"myR9FJitM5eDYzQvDnGXPXD7LFoXw91oAZ":false,"n4q8fhk38s2rBfS2ZeAAiC3dfMP7X4p7F1":false,"mpiVHCT9Fe6TCh5ZU862tpK6JhdBWoQkRs":false,"mfsK8DnY6Px6NpxqUiCaAHHyMpaYPv67Gk":false,"mpiQLtGkhRUQmo6kHQseAoqdq9WANgvpSJ":false,"mx4cZn3XPRjejzC119buMKYjuRN85Vb5um":false,"mz9VT4zPiH8vBAgKZn7Gf9VnRQstfEcnrX":false,"miaYjb1WetR2MZK5r3zrFxRS8BA6pvrBkU":false,"mtNHUh4G5EBe5KuWtwRsSZSnHQjiRDtMYE":false,"mhGt72NEBz6GY5F7AqgiN1ZHu1mh3jTnU6":false,"n4YN28XhZ9heUDWZ2tTGHmgqSW8mDVsoSr":false,"n1cSBqiuLWygTK29maXmoPp45viXgzpXr8":false,"mnq5grJzMVXehaMRn61Xwt7u5seqnmXcx8":false,"mhoszJwb7jduLfgg18AKMrMBsLBq9WTpzG":false,"mzi3gBmmhe9u8vzrabG2zyw9RYvidsvhsZ":false,"mvzPPyHreLKmcMkm3rt24CDRiv2RfV2mJ9":false}}',
			)
			.post(
				"/api/wallets/addresses",
				'{"addresses":["mvVAfs3MCDYg7HokDhL6pPuef6KZLPdUUz","msy7ZqCfVFBuNAf4GJSEnrpc9HMpn6mPV2","n4pMT65JrzLCfA6ErNX63yb6GvcA2oMwtA","mjJ7AvduauMXmtj8AcxfkdJkjhYcKqChJR","mm9gzxT8zh7Beo1wxmNKSgePXVSEYSrCrM","mjTHjhtECpHPpTckxqUuEirexUoXnVa2C4","mhn5Lm29KHQpSFb888Ne2N8sjCoTstAAAq","mrHYgvzE2xAL7sxVfJDP4WuGUP181RvBr3","mnL5PvKG4GXwX3AYLSx75S98vFeFteBJRq","mn6RriDhuTh9DrXX8WwKmHBpMFkXpU4w4A","msR3m6CyXZ9bTG5ooQDcbwEtzwgAsKrKDw","n3kvzGysEJ3XuzecWaAtBTxjnpD4BZAiYe","n2bKDbjXLj3QYLMfBmd9GVcy1c19wJUxWi","mxyZfgBZo7goEiMFz4ZfXpWjqxGdfJnckQ","mhThc9DvGgJZZoDf3JxE8mHpcTS8wBoiDH","mzTxEzujzS2bMD9BWYck2U7k9m79grRnaw","mpfthavUUarbK8vBkrLEqBX3SDaj8632Af","moyKoZsCf6UP8X4HkRxdKmq5ihamCNpxon","mksdPb37aU3QwvdHS3Q442PiPX1qxhquq3","n4gPfaKpeLpTUyazt296bHf3hj6ZB7H2wc","mzXqh3GSAkRF83HA9xXvgkCsUMPhtbpF47","mvRPTy61Eu5FuQkKSD9RschXsCcgT7F9Ke","mfnKdSFaXGTgjd67xZrPMrxamBxuk9JfwF","miqgjnVTsheUs75EQ7W6MVN2ScvP7uB8MX","mtqgfbjZ9tstZtr3jyVKNzjPsfvKgqwdsh","mj6WUpsrEE1DKyyh6Tt4dL4Q6ovYMJXDqv","n2GwVELhoFabFoideHVSfimb66wUGHPzmp","mi55ngoeJQUmZ8ewxe799pQ744JkMbCjcr","mtd1drZCsnBXSnNhHj74N42xrXdTNQefbG","moAgQVoviA2D2aQV2jB9CRyjQF4KcWJg1t","mtoy82b6JjSjU44YMm49bUW3kkrgcA7eEL","mvXQdC1Jup75WNTry5zx7iaYb6UFWtgt4o","moa9QDEacjkayZ5VbWTTfCNkjKAVxgiX7K","moyESkaN1TDxtdcMFk5LTU8EcB7tP2eSgJ","mpRcrvTbFmwymYgW79m8tE5ANWJEGhBq2s","mwcQ2Kd7fKqH9x7cWgMksmKy6UL8BYZFbc","mnR7bePTUyRvm4Vu4EkvYrbc7UbLF7aiwi","mqvktLDsBXL7WVLamv9XAaNw3mProXaah3","mhCKygbPwuUojtMXKn5ugoDzfTyMxFek6D","mhPGchVv6RRVAGBwGNNBzNpumQk2YGm9Gp","my1Qedk3CfmGta8LWKQ7AbjTZCiA55Yt2S","mwB5CuoASxBWoqXBrq7mLYFNdvSrYhRvgm","mperSDrmbXYiu6iwsKKuspm8aPMEphvPWT","mhxa7TrYpBtLUPYmNmy7JsUZk5V2REXVww","mn1yfnj9LoEy9CLHmzw56uSmeyadB4Hzr5","mg7ZjKofdu1PEHjvC4WUrDsoC3nryoNUMH","mqM9sEh2K6bLwzcu5p6Gxxc6qVzFekrTBz","mwrERKNjnPr8tpu3grMy8zgEH68f9sxJx8","mxbLagg9QeW3k1eU9WEPso47f9nSwLhfPu","myWQKwR4iH3vsrdqKpznCPb12EshFSHeQ6","mfo4DWwc97XDr3yu8C8UxBA9djH4CHD7kG","mj7nVSAaV48zHRiiNtE4UCUe2x78tC2Qjp","my5PR9y5a5V23ufKjJ3v8wJpf8DaB7uwiL","mzGiFCYG6bsuuuV22wWt1u7A8UvCNZ8e4Q","myt62zMyGwmHNiV1h9ML6TuzU8nCYvcGpy","mxxFkSeZm6D5E6wjopqa97vszv6rqs9UCD","n4Mw2mYzqNFL8C6M3RNVBxfBRwAN9hcjG6","msJRXNbQkHynga9eW6pFLqAs1eZhzFoWQZ","n2DBGhEALVhmkyL6LzMxdgRh4SF1Ke2Mw9","mpM3wMnFjRUTcDWLcd5DZ51TgeqFw5N2ZM","mfx8pr2V2momqz9St5bbCaHeQCwH41TXne","mswRM5kueZHKkWPweq4nyfFpJRiEQ6UTrj","mhuxUusT441up1qCuKH6dCbdvXNECY14nM","mh5RPyq3Czki5WgWajEvTfE92PWgCiCont","mwxwmMPD27HhiatihhSspcCj4N2LaBrzcj","mmLAdsaK8RUhP7yqhSJM9caW6hrRKisLac","mmT7jzFyYPU6UnVSJ1bjxfJVYN1AKhZWJa","mwKdHeoHC5CPmm9CPRwoiUhwPWMMrosU3e","n3ATQKG5hVCXybev6fjZdZotbT5ih6LFDP","mvYaUg6WrAJWrjVVZBd7nPoe8zXay1tV9i","mhyfefXY1E46vHcdtDiUvY6HfS7LMXtKAJ","mswLRozh5Dpm7M7srHsF6KM3zDFZTJEEVn","mprDv1gvszNaVn47TaWPGgCARWyeq5yD6J","mi9YQP1ju8UjVa3uGA8BHTC3odh3gBJ1QR","mtuVbP91A4c8de2swYdDGyjJFmXjmCHQdz","mvQnYSDVvP6km5cU5TN3aApPKGa5PmFcSw","mk3JiS44hpN4dnnoS45xpuNXoALcEQE4iY","mnSY6sVsCBnHe6PVVVFK6bV6tf3Ri1ykcG","mtsVQhKHxohGeNDPK1epp2DPKT2jmZRn6b","mh7Ur94RHTwgjGteiybQN7nhmWZRKWo9ou","mzLsZTGwRhALkrSC555Fgetym5XLhfpW8e","mfdPbWAXs2sMBWkwGW9KgwGEEjy7R4oWhf","mvJCVH63DnXrzRycMJs15i3MEFQ3ginVvP","mz1ts8kGKWNuyxLBk7vEzsL8og2EPp1Vce","mn31JAtD9YrFPFMJAgQCrd3vi8XZNEA43e","n4bAGQkxXirKau9KNCex7HDY49YnDgsp3g","msbszKYDW4qCB8ueShWEYBuHsfeEBc8fdq","n1Q2zUqpWkkhS28eAtX3deF8xNLUWN3bzP","msmrDofDLBV3pWhbVXhcJo3Qm8VxYuKBL6","mk8gb2D8JNiQijb41NjWSRKBLv7zSVs4j3","mu5BVNMJ5HNrh2FP4t98Qmhfx5T1Gr3isH","mkd7kigFhRAgLXhcDQ12194NDiVKqJrdzF","n2AJmJCtyDiZd66CN9S6RmzTVK9TsCUTzv","mtNoXBnrwBLfwqbJe1syBZwAAsk9E1LpSh","mmnjKUc85eX49Aqnbibo113yba9DqyUUxH","my31AvFqnaRXs2CQdz1t9TXNU1ahZr7kph","mwWNQuwD6u4SmpTxJb8HVoYNDrMap6PYCh","mo5aR4S9JYb3PQpot8wBwhQyEtNp6wsdZb","mjjNUNVcG7qpHQiWhU96MhQVip5Jvw1fME","n3Shrgfben2UAvgqhGo4L9eEpw2ZcQ8Gxf"]}',
			)
			.reply(
				200,
				'{"data":{"mvVAfs3MCDYg7HokDhL6pPuef6KZLPdUUz":true,"msy7ZqCfVFBuNAf4GJSEnrpc9HMpn6mPV2":true,"n4pMT65JrzLCfA6ErNX63yb6GvcA2oMwtA":true,"mjJ7AvduauMXmtj8AcxfkdJkjhYcKqChJR":true,"mm9gzxT8zh7Beo1wxmNKSgePXVSEYSrCrM":false,"mjTHjhtECpHPpTckxqUuEirexUoXnVa2C4":false,"mhn5Lm29KHQpSFb888Ne2N8sjCoTstAAAq":false,"mrHYgvzE2xAL7sxVfJDP4WuGUP181RvBr3":false,"mnL5PvKG4GXwX3AYLSx75S98vFeFteBJRq":false,"mn6RriDhuTh9DrXX8WwKmHBpMFkXpU4w4A":false,"msR3m6CyXZ9bTG5ooQDcbwEtzwgAsKrKDw":false,"n3kvzGysEJ3XuzecWaAtBTxjnpD4BZAiYe":false,"n2bKDbjXLj3QYLMfBmd9GVcy1c19wJUxWi":false,"mxyZfgBZo7goEiMFz4ZfXpWjqxGdfJnckQ":false,"mhThc9DvGgJZZoDf3JxE8mHpcTS8wBoiDH":false,"mzTxEzujzS2bMD9BWYck2U7k9m79grRnaw":false,"mpfthavUUarbK8vBkrLEqBX3SDaj8632Af":false,"moyKoZsCf6UP8X4HkRxdKmq5ihamCNpxon":false,"mksdPb37aU3QwvdHS3Q442PiPX1qxhquq3":false,"n4gPfaKpeLpTUyazt296bHf3hj6ZB7H2wc":false,"mzXqh3GSAkRF83HA9xXvgkCsUMPhtbpF47":false,"mvRPTy61Eu5FuQkKSD9RschXsCcgT7F9Ke":false,"mfnKdSFaXGTgjd67xZrPMrxamBxuk9JfwF":false,"miqgjnVTsheUs75EQ7W6MVN2ScvP7uB8MX":false,"mtqgfbjZ9tstZtr3jyVKNzjPsfvKgqwdsh":false,"mj6WUpsrEE1DKyyh6Tt4dL4Q6ovYMJXDqv":false,"n2GwVELhoFabFoideHVSfimb66wUGHPzmp":false,"mi55ngoeJQUmZ8ewxe799pQ744JkMbCjcr":false,"mtd1drZCsnBXSnNhHj74N42xrXdTNQefbG":false,"moAgQVoviA2D2aQV2jB9CRyjQF4KcWJg1t":false,"mtoy82b6JjSjU44YMm49bUW3kkrgcA7eEL":false,"mvXQdC1Jup75WNTry5zx7iaYb6UFWtgt4o":false,"moa9QDEacjkayZ5VbWTTfCNkjKAVxgiX7K":false,"moyESkaN1TDxtdcMFk5LTU8EcB7tP2eSgJ":false,"mpRcrvTbFmwymYgW79m8tE5ANWJEGhBq2s":false,"mwcQ2Kd7fKqH9x7cWgMksmKy6UL8BYZFbc":false,"mnR7bePTUyRvm4Vu4EkvYrbc7UbLF7aiwi":false,"mqvktLDsBXL7WVLamv9XAaNw3mProXaah3":false,"mhCKygbPwuUojtMXKn5ugoDzfTyMxFek6D":false,"mhPGchVv6RRVAGBwGNNBzNpumQk2YGm9Gp":false,"my1Qedk3CfmGta8LWKQ7AbjTZCiA55Yt2S":false,"mwB5CuoASxBWoqXBrq7mLYFNdvSrYhRvgm":false,"mperSDrmbXYiu6iwsKKuspm8aPMEphvPWT":false,"mhxa7TrYpBtLUPYmNmy7JsUZk5V2REXVww":false,"mn1yfnj9LoEy9CLHmzw56uSmeyadB4Hzr5":false,"mg7ZjKofdu1PEHjvC4WUrDsoC3nryoNUMH":false,"mqM9sEh2K6bLwzcu5p6Gxxc6qVzFekrTBz":false,"mwrERKNjnPr8tpu3grMy8zgEH68f9sxJx8":false,"mxbLagg9QeW3k1eU9WEPso47f9nSwLhfPu":false,"myWQKwR4iH3vsrdqKpznCPb12EshFSHeQ6":false,"mfo4DWwc97XDr3yu8C8UxBA9djH4CHD7kG":false,"mj7nVSAaV48zHRiiNtE4UCUe2x78tC2Qjp":false,"my5PR9y5a5V23ufKjJ3v8wJpf8DaB7uwiL":false,"mzGiFCYG6bsuuuV22wWt1u7A8UvCNZ8e4Q":false,"myt62zMyGwmHNiV1h9ML6TuzU8nCYvcGpy":false,"mxxFkSeZm6D5E6wjopqa97vszv6rqs9UCD":false,"n4Mw2mYzqNFL8C6M3RNVBxfBRwAN9hcjG6":false,"msJRXNbQkHynga9eW6pFLqAs1eZhzFoWQZ":false,"n2DBGhEALVhmkyL6LzMxdgRh4SF1Ke2Mw9":false,"mpM3wMnFjRUTcDWLcd5DZ51TgeqFw5N2ZM":false,"mfx8pr2V2momqz9St5bbCaHeQCwH41TXne":false,"mswRM5kueZHKkWPweq4nyfFpJRiEQ6UTrj":false,"mhuxUusT441up1qCuKH6dCbdvXNECY14nM":false,"mh5RPyq3Czki5WgWajEvTfE92PWgCiCont":false,"mwxwmMPD27HhiatihhSspcCj4N2LaBrzcj":false,"mmLAdsaK8RUhP7yqhSJM9caW6hrRKisLac":false,"mmT7jzFyYPU6UnVSJ1bjxfJVYN1AKhZWJa":false,"mwKdHeoHC5CPmm9CPRwoiUhwPWMMrosU3e":false,"n3ATQKG5hVCXybev6fjZdZotbT5ih6LFDP":false,"mvYaUg6WrAJWrjVVZBd7nPoe8zXay1tV9i":false,"mhyfefXY1E46vHcdtDiUvY6HfS7LMXtKAJ":false,"mswLRozh5Dpm7M7srHsF6KM3zDFZTJEEVn":false,"mprDv1gvszNaVn47TaWPGgCARWyeq5yD6J":false,"mi9YQP1ju8UjVa3uGA8BHTC3odh3gBJ1QR":false,"mtuVbP91A4c8de2swYdDGyjJFmXjmCHQdz":false,"mvQnYSDVvP6km5cU5TN3aApPKGa5PmFcSw":false,"mk3JiS44hpN4dnnoS45xpuNXoALcEQE4iY":false,"mnSY6sVsCBnHe6PVVVFK6bV6tf3Ri1ykcG":false,"mtsVQhKHxohGeNDPK1epp2DPKT2jmZRn6b":false,"mh7Ur94RHTwgjGteiybQN7nhmWZRKWo9ou":false,"mzLsZTGwRhALkrSC555Fgetym5XLhfpW8e":false,"mfdPbWAXs2sMBWkwGW9KgwGEEjy7R4oWhf":false,"mvJCVH63DnXrzRycMJs15i3MEFQ3ginVvP":false,"mz1ts8kGKWNuyxLBk7vEzsL8og2EPp1Vce":false,"mn31JAtD9YrFPFMJAgQCrd3vi8XZNEA43e":false,"n4bAGQkxXirKau9KNCex7HDY49YnDgsp3g":false,"msbszKYDW4qCB8ueShWEYBuHsfeEBc8fdq":false,"n1Q2zUqpWkkhS28eAtX3deF8xNLUWN3bzP":false,"msmrDofDLBV3pWhbVXhcJo3Qm8VxYuKBL6":false,"mk8gb2D8JNiQijb41NjWSRKBLv7zSVs4j3":false,"mu5BVNMJ5HNrh2FP4t98Qmhfx5T1Gr3isH":false,"mkd7kigFhRAgLXhcDQ12194NDiVKqJrdzF":false,"n2AJmJCtyDiZd66CN9S6RmzTVK9TsCUTzv":false,"mtNoXBnrwBLfwqbJe1syBZwAAsk9E1LpSh":false,"mmnjKUc85eX49Aqnbibo113yba9DqyUUxH":false,"my31AvFqnaRXs2CQdz1t9TXNU1ahZr7kph":false,"mwWNQuwD6u4SmpTxJb8HVoYNDrMap6PYCh":false,"mo5aR4S9JYb3PQpot8wBwhQyEtNp6wsdZb":false,"mjjNUNVcG7qpHQiWhU96MhQVip5Jvw1fME":false,"n3Shrgfben2UAvgqhGo4L9eEpw2ZcQ8Gxf":false}}',
			)
			.post(
				"/api/wallets/transactions/unspent",
				'{"addresses":["mvVAfs3MCDYg7HokDhL6pPuef6KZLPdUUz","msy7ZqCfVFBuNAf4GJSEnrpc9HMpn6mPV2","n4pMT65JrzLCfA6ErNX63yb6GvcA2oMwtA","mjJ7AvduauMXmtj8AcxfkdJkjhYcKqChJR"]}',
			)
			.reply(
				200,
				'{"data":[{"address":"mjJ7AvduauMXmtj8AcxfkdJkjhYcKqChJR","txId":"38fdefd8753be8c8101b948bda15eec6d03289a677b9da3f47c952829ccced26","outputIndex":1,"script":"76a9142972817fede6af97b9e0482a8c70e1026267bb0088ac","satoshis":82000},{"address":"msy7ZqCfVFBuNAf4GJSEnrpc9HMpn6mPV2","txId":"a8ce11e894c7f5178d086584486efb836432c9e7eb1a7030aa4d3a4e39cdb394","outputIndex":0,"script":"76a91488941076e6adf6063892bf338783f805d582c9b388ac","satoshis":30000},{"address":"mvVAfs3MCDYg7HokDhL6pPuef6KZLPdUUz","txId":"67c2cc6fe363bbf4a15083cc3c230f497a964049486b12b7815c5028ed19eca0","outputIndex":1,"script":"76a914a43362c51b5ab6b2476c55e0a88452533e1a155a88ac","satoshis":100000},{"address":"n4pMT65JrzLCfA6ErNX63yb6GvcA2oMwtA","txId":"285614f13fabd80bc50f32ef9fee4e3107e40f793e1ba16a1c81dda6c2327555","outputIndex":1,"script":"76a914ff954b38c974ae46f6908a496896c53a833330cb88ac","satoshis":100000}],"links":{"first":"https:\\/\\/btc-test.arkvault.io\\/api\\/wallets\\/transactions\\/unspent?page=1","last":"https:\\/\\/btc-tearkvault.iohq.com\\/api\\/wallets\\/transactions\\/unspent?page=1","prev":null,"next":null},"meta":{"current_page":1,"from":1,"last_page":1,"links":[{"url":null,"label":"&laquo; Previous","active":false},{"url":"https:\\/\\/btcarkvault.ioenthq.com\\/api\\/wallets\\/transactions\\/unspent?page=1","label":"1","active":true},{"url":null,"label":"Next &raquo;","active":false}],"path":"https:\\/\\/arkvault.ioarkvault.io\\/api\\/wallets\\/transactions\\/unspent","per_page":15,"to":4,"total":4}}',
			)
			.post(
				"/api/wallets/transactions/raw",
				'{"transaction_ids":["38fdefd8753be8c8101b948bda15eec6d03289a677b9da3f47c952829ccced26","a8ce11e894c7f5178d086584486efb836432c9e7eb1a7030aa4d3a4e39cdb394","67c2cc6fe363bbf4a15083cc3c230f497a964049486b12b7815c5028ed19eca0","285614f13fabd80bc50f32ef9fee4e3107e40f793e1ba16a1c81dda6c2327555"]}',
			)
			.reply(
				200,
				'{"data":{"38fdefd8753be8c8101b948bda15eec6d03289a677b9da3f47c952829ccced26":"02000000000101c6cbc73cc5751b561faebded4ba14641c3ab73edba4698026fe253bbd2ec05d30000000000feffffff0229eca1be080000001600143555d0308b812db6d1ddbb19bd89b84e67b9179450400100000000001976a9142972817fede6af97b9e0482a8c70e1026267bb0088ac0247304402206ffd0cb34a5b9bf0a940ced2bff963dbfee8848cf59e0f2a7297a2eabd0139290220106052789195ac664250ab86f592dce97fedfa752a34e5832f5d5c297a7b808e012103ab3719fad83e63de571fe36c7d441e0ed4e4f303ae8cd04b71f3eb2da07049afabf61f00","a8ce11e894c7f5178d086584486efb836432c9e7eb1a7030aa4d3a4e39cdb394":"010000000001011e28480a71d4bb1eafa75eb082fd97926c6542afd15678c98d1eca0a91b43a2a0000000000000000000230750000000000001976a91488941076e6adf6063892bf338783f805d582c9b388acde100100000000001600140ab1eb8e14afc44bfcbe551762186ebbabc5a7980247304402204b53cdb65d9604fd997d90106476aa8b72d1c8042d1e9a7c0248646a0cfdf53f02200802246764b7cc125c2180f5738d962a12373de554ed27cedcadab18cf1febe7012102823b744a0a42c15851c1d8cd6415a792474dad4a401d997f96c7185985164e2d00000000","67c2cc6fe363bbf4a15083cc3c230f497a964049486b12b7815c5028ed19eca0":"02000000000101e6946a967297d4d31622d2738fd5eb253dd641cd1e548ddfc8899c20d417edab0000000000feffffff022ddb60000000000017a914fd74bd3b653f0905ec955ff2d9d7a24d9910f9b487a0860100000000001976a914a43362c51b5ab6b2476c55e0a88452533e1a155a88ac0247304402207c1ea29f8b5a6104994d37f202364a15c398ae00fe8b27a01a89ea221a69fb11022013bbc97d646ec2d767e6f06e83781923cfb4d03168fdb10003a7b072a334e683012102c87c5c38f61500ea311a181b5dacd9d4d8c513b88875d8f8a7abe883c062d3dac09f1e00","285614f13fabd80bc50f32ef9fee4e3107e40f793e1ba16a1c81dda6c2327555":"020000000001019404d857a439f2ef694e11ea4aae205227a944c4ada7feba006d499b65d6b19b0100000000feffffff0233fbb7000000000017a914390ad85a6b10a50ab02e0f8cee65dd9c33f8d69287a0860100000000001976a914ff954b38c974ae46f6908a496896c53a833330cb88ac0247304402202fad643d4b023d2e8f156a0e0723094760baaa0aa9fcd07271ea4de87d2193fd022025c246eeb104c52b77fb8b5abe7f6f6c45db96e4b73d1297e75f1f4c477509f20121032065b9938030e4c5eaa83594a0d83c4065c8cdd6380853793b4167af60a9278e6ff61f00"}}',
			)
			.get("/api/fees")
			.reply(200, {
				data: {
					avg: 0.000_000_1,
					max: 0.001_806_17,
					min: 0.000_010_74,
				},
			})
			.persist();
	});

	it("should generate a transfer transaction and sign it with ledger nano", async () => {
		const signatory = new Signatories.Signatory(
			new Signatories.LedgerSignatory({
				options: {
					bip44: {
						account: 0,
					},
				},
				signingKey: "doesn't matter",
			}),
		);

		const result = await configureMock(ledger.transfers.bip44.record).transfer({
			data: {
				amount: 0.0001,
				to: "tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn",
			},
			signatory,
		});

		assert.is(
			result.toBroadcast(),
			"0100000001a0ec19ed28505c81b7126b484940967a490f233ccc8350a1f4bb63e36fccc267010000006b4830450221009a5f6bec6bade72cfc8abb260d5f36504de840b8397821ef666f32b32676d54b02203d8975cbe5c0b5eecbcfabca2b803c1f879a12652d4a437786b7ff2e4a2ed641012102c51a1a843e4661e603d7d28279dcf58c065f8a217818fa00202b666aa56faa8bffffffff021027000000000000160014f3e9df76d5ccbfb4e29c047a942815a32a477ac4f6580100000000001976a914ef628f069100b9831b592ea20a1d446e5de2c01588ac00000000",
		);
		assert.is(result.id(), "22555462e2877f6799ca7fa9887d44093bba9686fac0ebe15aa5445374abd5a5");
		assert.is(result.sender(), "mvVAfs3MCDYg7HokDhL6pPuef6KZLPdUUz");
		assert.is(result.recipient(), "tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn");
		assert.is(result.amount().toNumber(), 10_000);
		assert.is(result.fee().toNumber(), 1690);
		assert.instance(result.timestamp(), DateTime);
	});
});

describe("BIP49 wallet", ({ beforeAll, it, assert, nock }) => {
	beforeAll(() => {
		nock.fake("https://btc-test.arkvault.io:443", { encodedQueryParams: true })
			.post(
				"/api/wallets/addresses",
				'{"addresses":["2Mx8BgV28sZNRfxej4LYwdQFxuAVFfomE5x","2NByjSULyMEkygcskxGSacykeAiPRYZuNwy","2N6RNFCB6P2h3rUCq8FaWWNKgusSQwryqUF","2Mxsne6658s13XN5Di7kemRgHXwFSnv96xP","2MvbRTn2zrdf4Zffx5uUC9opA6iKYyqgfgB","2N4mByjRtfvGiYh8zWqEopQ7D8rHk2VjjCp","2N6LFB1UmeyubUYDvFWVmy5U8cZv8Nj4KHS","2MyLZR3jxuWnayunLYE9QZ7ntkLFP2TmcY9","2MwH78onDen8J6JmgsghWmK8faAbDAAELfA","2Myum3pvpF3pK8YVgmQpxRgo577nnJqZjMu","2N5KpAiFmTgWNBsoNcSh48eDaN9qPtZEBZq","2NDYkMgjJhx4DsfHvHMThJ4pJ5YMf3L3PCg","2MshVgiAm2KxndAJAy2aUDQz9GSr9RfLgZ9","2NFd2XpoFLMEdaLq8vtr5f4TCqDo75E3ugG","2MyBLMkMJaxg9CbyiWMB7DrAzrBrpGDnDgw","2MtVanoDBYxiMrgFrQWJh3rmQVMHt5EaNDs","2N7AbAmZjmfZ2ZvYiZXWEFqnf3VnrgUEV2m","2N6n5ZTjpLBcVSVmqq2Do8Apqe6oxrWcr4o","2MwHNChStcwTN8viwCzuouGdgDgnd9UG6Fq","2NE7KtYVPg44W9CZdtdZHnnPQpT8Jq4E4cN","2NB7TCpaJSo7NrYyFZfWvoifFvsybUHMpfx","2N3VXUTTDWnNE2qDsPkpfL7HcBdVPrNkYSc","2Mu1BN78b3yfgHNdcux69wgBez9djsuy4Z5","2NF1ExWsui72mSdtym2rkHqp7oic2jXcAWy","2N2YJeYjbJfcPhHqJhhgHiistfyLWEf7KVL","2N3UosruupFvh9ESM3hMYXut7FR4GzrCfKn","2NEn84bztkL7JjjVcqSPZ3bX5ZaaeMg68L6","2My3aB99xuKZt8YQ5c5icbdhCKZnJC1BdK4","2Mx1cA4mKGQBbokWqArY3RGvxTYc5Vs3zzP","2MzpHtPDji3yXwarEsQgnfKdKEDk3MfdarF","2Mt7zuTLbEoaRgbg9R8aHuYrUKsMNLNBpwM","2N1JBNrEi9LwhKGE5zNy4EwfHyd9eefeVQE","2N8Mh5vyWqsYZSA44k8AK6qktxZc6qD9Bkr","2NDhgWPV3EqAAWigTDugVthNyNe7cdHEuXh","2NA9Xb14nAKnme29AqQFJrpYN5Thnvf7azE","2NAigvVnz6jG7yDzBfrMPsjs4kNhVUs4XBb","2MzfbLtKYGjkJgg1x8obGRY797wttixSzGY","2N9pT6VMcDyD1GNatekK9VKNUTYob7TqbAT","2N99qkLoRN7DHtxU6dX4nMciNY9rkA6oc7i","2NENaVKYDvL5Kd1YS3KpZwWUo3QNVR9E5mR","2N6KvgRKRdQzaVGXgEBxxFynwHCB6vnLfDG","2N8dBRxpFE8wjgpuxroeHMC3MURzE4JRQVr","2NBDZyi5DhK89B2e8D19dojqBumyabmsqMH","2MuD1ET94HqSSdWdWXjZhF8DsfNDzR6YYzD","2N3L2uCn6bmwJycQ7eC3zY9QEeDpQm7BVd5","2Msd8aLAGSrZMNmuJgdE1RcgA6s97ysRjxC","2N1e8UYbwVRqvwQ1pKwByWWcLRjXtLPAj6o","2MvLEkNXpymZgsuLkJ5yrBeSw7hAeMpdzyW","2N52T9P5buocvJArMEGyfWdkokaupBZB9ZQ","2MuUwYRniGiXA52mxkUDPwCNdf7tD3SDfsu","2MyD1dUeWzcKBBBMBuc13o2ATqdeAtnM48W","2N84AzFo5Zba7eZr6K23jNDHKLva9wirSW2","2NEYFAW3aWiVPpoVuyWLRZGg9EbQd4Exk8L","2NCnjy4MootxcfC4uyXBzu5z2HjPJpk9TdR","2Msf9ThkUpoLBBMytDg4C7uWwRjh2xsGxhA","2N6Pqx55rWQH5SgzyrE7qjKgSAH4GNpkQuy","2N9P5cNyVUsX9TVzr7uhHCXbytRMXyxBEqv","2N8hX4FtSky9gMxF4BQnPhiYKqVhte54gcd","2N5bbmLwcSHf2x2W2YGB9cS1u4pKEgBi4Vt","2N9o3HY1TCetk5xuqe8cxeA8jDh3irF4Jtd","2N7VgkgKnoDP61rxUUNjnTSFqFLBQXsTsex","2NAYLihQScz3iHJTvDmj9ACmcqfqYUNRAxv","2Mv6wbB6ViaZiXz6wJFMa5p8Qrf29qXn1yN","2NBpzkXAdL9xAXWH3rGPt47dtBdc6KGygzZ","2NBzwDvi6iNe3Gj6tnMFJ66NV6Pynw2Cip6","2NCDwyLRCbL5oHkyRucmbG9boe5sywdNqps","2N6MAAVdPooqWBJhdtdNF8BWv8gcwyug2mE","2N5hjtAL8JU53oSvWZoHJk72mstW732MowY","2My9Hs9BtbkRmNXXkQyLt1sFs7P24NGJ4Vx","2N374dZdJpraF5ooHqJSZ8iaSCkDp11RvZf","2N1VLmHhvcPLAL6Vp4xz3hs8zLZrt4nvJSE","2NFRAdLzVBje3oqy9LpujgCDRpFfscumK1i","2NAfeXVeYmtBKgqa8RujTerJEK2qqiz3tDr","2NEg9JNWaCRDP7uuBqHsV3iQcFgtt1gDFXv","2NEekrhjfE2hZCSTY9HVopQ4qeeg6N87nN4","2N6FVVpnN4cznpzWbeWZKoHkoGP1baoBnNE","2MwfHLCfW9EC2fa1mPM5UzTGS4Z1jGhs2xE","2N7KzmzEQabVAYHfhoAdQcXKFucN9igy6no","2NCptervssFFLQAHoWtMihjkn2Mb9ijzQbp","2N3PniBwM7bwdjgheUtkFcwXMcWhxoN3YiX","2NFhnFiLnuivYgMXnzoGuVMP2mU2fiPSX4t","2MumCG7uf8YamjcZDQNDdUan5eTzysFXsZ1","2N6P8vZSqbW8fUkdqJwqJgAJ5n9UsWwtntC","2Mu3XFeGCctySKXW7amoXYg9GFUNUHnsKcL","2N2bgA9p2s8NHPvzJgHKj4GNuxRvfeEMbVF","2MuLXhq2WWymGURMk8WT3LQEUXsSwnKVFBL","2N4jrKnX52MZrSkgjL8cUnHjjSuRYDAEyDB","2NBSbAn8K3ZCi7mZsnzkYhrfNgmfXshcNXk","2N8oBJjTCPVCvEjnsCdAb4x5qCQFgF7oLb6","2NDFLrvcr74xxVmURLRBxH5WBajxY2HATSU","2MuP9YynsptF9eH9iMeLFJx1X3pjLnLsUhi","2N1ZKszXutoGtYwQRNnWAqRCM15QT9qk7in","2NGMz23MswCkzeRveXGAqQRsdmoUN3XhG65","2MtUD1x4CLNTY3QMaLt3dBcz7pd4dZd3eqQ","2N8fafFdBvNTCLDZvFd6PgsfgPumGnSPeaN","2MyVuY7gBey38HMppvmBXWHeuHuqebMkhsY","2MyjBb6omXSkpLYt3oBD1ignW1zSiCH5cUZ","2NDi4oz4uxnckwBtqL4AZBZWrSCfKmV9q1K","2N5yzU6NNdBaWL6pXNuMdnE5hRhsiNed1X1","2N2dSPhNMw5Jy6Yh148iYVxY1ceFMauCfy7"]}',
			)
			.reply(
				200,
				'{"data":{"2Mx8BgV28sZNRfxej4LYwdQFxuAVFfomE5x":true,"2NByjSULyMEkygcskxGSacykeAiPRYZuNwy":false,"2N6RNFCB6P2h3rUCq8FaWWNKgusSQwryqUF":false,"2Mxsne6658s13XN5Di7kemRgHXwFSnv96xP":false,"2MvbRTn2zrdf4Zffx5uUC9opA6iKYyqgfgB":false,"2N4mByjRtfvGiYh8zWqEopQ7D8rHk2VjjCp":false,"2N6LFB1UmeyubUYDvFWVmy5U8cZv8Nj4KHS":false,"2MyLZR3jxuWnayunLYE9QZ7ntkLFP2TmcY9":false,"2MwH78onDen8J6JmgsghWmK8faAbDAAELfA":false,"2Myum3pvpF3pK8YVgmQpxRgo577nnJqZjMu":false,"2N5KpAiFmTgWNBsoNcSh48eDaN9qPtZEBZq":false,"2NDYkMgjJhx4DsfHvHMThJ4pJ5YMf3L3PCg":false,"2MshVgiAm2KxndAJAy2aUDQz9GSr9RfLgZ9":false,"2NFd2XpoFLMEdaLq8vtr5f4TCqDo75E3ugG":false,"2MyBLMkMJaxg9CbyiWMB7DrAzrBrpGDnDgw":false,"2MtVanoDBYxiMrgFrQWJh3rmQVMHt5EaNDs":false,"2N7AbAmZjmfZ2ZvYiZXWEFqnf3VnrgUEV2m":false,"2N6n5ZTjpLBcVSVmqq2Do8Apqe6oxrWcr4o":false,"2MwHNChStcwTN8viwCzuouGdgDgnd9UG6Fq":false,"2NE7KtYVPg44W9CZdtdZHnnPQpT8Jq4E4cN":false,"2NB7TCpaJSo7NrYyFZfWvoifFvsybUHMpfx":false,"2N3VXUTTDWnNE2qDsPkpfL7HcBdVPrNkYSc":false,"2Mu1BN78b3yfgHNdcux69wgBez9djsuy4Z5":false,"2NF1ExWsui72mSdtym2rkHqp7oic2jXcAWy":false,"2N2YJeYjbJfcPhHqJhhgHiistfyLWEf7KVL":false,"2N3UosruupFvh9ESM3hMYXut7FR4GzrCfKn":false,"2NEn84bztkL7JjjVcqSPZ3bX5ZaaeMg68L6":false,"2My3aB99xuKZt8YQ5c5icbdhCKZnJC1BdK4":false,"2Mx1cA4mKGQBbokWqArY3RGvxTYc5Vs3zzP":false,"2MzpHtPDji3yXwarEsQgnfKdKEDk3MfdarF":false,"2Mt7zuTLbEoaRgbg9R8aHuYrUKsMNLNBpwM":false,"2N1JBNrEi9LwhKGE5zNy4EwfHyd9eefeVQE":false,"2N8Mh5vyWqsYZSA44k8AK6qktxZc6qD9Bkr":false,"2NDhgWPV3EqAAWigTDugVthNyNe7cdHEuXh":false,"2NA9Xb14nAKnme29AqQFJrpYN5Thnvf7azE":false,"2NAigvVnz6jG7yDzBfrMPsjs4kNhVUs4XBb":false,"2MzfbLtKYGjkJgg1x8obGRY797wttixSzGY":false,"2N9pT6VMcDyD1GNatekK9VKNUTYob7TqbAT":false,"2N99qkLoRN7DHtxU6dX4nMciNY9rkA6oc7i":false,"2NENaVKYDvL5Kd1YS3KpZwWUo3QNVR9E5mR":false,"2N6KvgRKRdQzaVGXgEBxxFynwHCB6vnLfDG":false,"2N8dBRxpFE8wjgpuxroeHMC3MURzE4JRQVr":false,"2NBDZyi5DhK89B2e8D19dojqBumyabmsqMH":false,"2MuD1ET94HqSSdWdWXjZhF8DsfNDzR6YYzD":false,"2N3L2uCn6bmwJycQ7eC3zY9QEeDpQm7BVd5":false,"2Msd8aLAGSrZMNmuJgdE1RcgA6s97ysRjxC":false,"2N1e8UYbwVRqvwQ1pKwByWWcLRjXtLPAj6o":false,"2MvLEkNXpymZgsuLkJ5yrBeSw7hAeMpdzyW":false,"2N52T9P5buocvJArMEGyfWdkokaupBZB9ZQ":false,"2MuUwYRniGiXA52mxkUDPwCNdf7tD3SDfsu":false,"2MyD1dUeWzcKBBBMBuc13o2ATqdeAtnM48W":false,"2N84AzFo5Zba7eZr6K23jNDHKLva9wirSW2":false,"2NEYFAW3aWiVPpoVuyWLRZGg9EbQd4Exk8L":false,"2NCnjy4MootxcfC4uyXBzu5z2HjPJpk9TdR":false,"2Msf9ThkUpoLBBMytDg4C7uWwRjh2xsGxhA":false,"2N6Pqx55rWQH5SgzyrE7qjKgSAH4GNpkQuy":false,"2N9P5cNyVUsX9TVzr7uhHCXbytRMXyxBEqv":false,"2N8hX4FtSky9gMxF4BQnPhiYKqVhte54gcd":false,"2N5bbmLwcSHf2x2W2YGB9cS1u4pKEgBi4Vt":false,"2N9o3HY1TCetk5xuqe8cxeA8jDh3irF4Jtd":false,"2N7VgkgKnoDP61rxUUNjnTSFqFLBQXsTsex":false,"2NAYLihQScz3iHJTvDmj9ACmcqfqYUNRAxv":false,"2Mv6wbB6ViaZiXz6wJFMa5p8Qrf29qXn1yN":false,"2NBpzkXAdL9xAXWH3rGPt47dtBdc6KGygzZ":false,"2NBzwDvi6iNe3Gj6tnMFJ66NV6Pynw2Cip6":false,"2NCDwyLRCbL5oHkyRucmbG9boe5sywdNqps":false,"2N6MAAVdPooqWBJhdtdNF8BWv8gcwyug2mE":false,"2N5hjtAL8JU53oSvWZoHJk72mstW732MowY":false,"2My9Hs9BtbkRmNXXkQyLt1sFs7P24NGJ4Vx":false,"2N374dZdJpraF5ooHqJSZ8iaSCkDp11RvZf":false,"2N1VLmHhvcPLAL6Vp4xz3hs8zLZrt4nvJSE":false,"2NFRAdLzVBje3oqy9LpujgCDRpFfscumK1i":false,"2NAfeXVeYmtBKgqa8RujTerJEK2qqiz3tDr":false,"2NEg9JNWaCRDP7uuBqHsV3iQcFgtt1gDFXv":false,"2NEekrhjfE2hZCSTY9HVopQ4qeeg6N87nN4":false,"2N6FVVpnN4cznpzWbeWZKoHkoGP1baoBnNE":false,"2MwfHLCfW9EC2fa1mPM5UzTGS4Z1jGhs2xE":false,"2N7KzmzEQabVAYHfhoAdQcXKFucN9igy6no":false,"2NCptervssFFLQAHoWtMihjkn2Mb9ijzQbp":false,"2N3PniBwM7bwdjgheUtkFcwXMcWhxoN3YiX":false,"2NFhnFiLnuivYgMXnzoGuVMP2mU2fiPSX4t":false,"2MumCG7uf8YamjcZDQNDdUan5eTzysFXsZ1":false,"2N6P8vZSqbW8fUkdqJwqJgAJ5n9UsWwtntC":false,"2Mu3XFeGCctySKXW7amoXYg9GFUNUHnsKcL":false,"2N2bgA9p2s8NHPvzJgHKj4GNuxRvfeEMbVF":false,"2MuLXhq2WWymGURMk8WT3LQEUXsSwnKVFBL":false,"2N4jrKnX52MZrSkgjL8cUnHjjSuRYDAEyDB":false,"2NBSbAn8K3ZCi7mZsnzkYhrfNgmfXshcNXk":false,"2N8oBJjTCPVCvEjnsCdAb4x5qCQFgF7oLb6":false,"2NDFLrvcr74xxVmURLRBxH5WBajxY2HATSU":false,"2MuP9YynsptF9eH9iMeLFJx1X3pjLnLsUhi":false,"2N1ZKszXutoGtYwQRNnWAqRCM15QT9qk7in":false,"2NGMz23MswCkzeRveXGAqQRsdmoUN3XhG65":false,"2MtUD1x4CLNTY3QMaLt3dBcz7pd4dZd3eqQ":false,"2N8fafFdBvNTCLDZvFd6PgsfgPumGnSPeaN":false,"2MyVuY7gBey38HMppvmBXWHeuHuqebMkhsY":false,"2MyjBb6omXSkpLYt3oBD1ignW1zSiCH5cUZ":false,"2NDi4oz4uxnckwBtqL4AZBZWrSCfKmV9q1K":false,"2N5yzU6NNdBaWL6pXNuMdnE5hRhsiNed1X1":false,"2N2dSPhNMw5Jy6Yh148iYVxY1ceFMauCfy7":false}}',
			)
			.post(
				"/api/wallets/addresses",
				'{"addresses":["2NFJNgNKsTDN3dCcFnu4TU9wAv5dK8tNYqT","2NEPkmdoupAyXarciUDeJCS91LCohgHHoGT","2N7r2MdRF8crWp9n31FGS4khEzbCxqyhyt8","2Mtn7RtFkegoK1jrTTsnrfND7SeeTEvjEtk","2N53JYnPGnHR8n2h2pn2P7KAZxqhDoWY67A","2MsgNpeb3fyevANfqmPYTFp5jdn9LU28wzt","2N4W4SAnbSqpb7XNC6upJ4XuER29yEf4Rn2","2NGMPrjN9Kcz2Z9jNhPUcCbWkxTy1pWbXRY","2N6VBnE4UQyNsk3gdcQ75gKXToVpY5mkGBr","2NGKfiHfTe58Rxe4LX13Bfc57qyZ8LD1hyP","2N5hbkQ1FV97iqSFuqeRkYGj6xoV2V1qTcK","2N99BxgDjBRVkMt5LwP2yR8nAFcA6mwF6o2","2MyRwooR4AYmT1kUNaVb5nChEwLQk25P3Fx","2NCGhJpGdmQ6jT8i8SH7vCJrYt84WxZ8E1j","2MuTCcJiqSNrVZXkfqgxVVRMGWYUhEraEEk","2N2qfsidLiyTV5e8NmMxBvRaTtezN3QMTmd","2Mse6jBMJdQLTqFCPB6Eiae7644TwjeP1xG","2Mvh2xTYn9saQW2vnXZ92rBcBVamUdtf4kk","2NCDfhtPB8NaYjB4GpLVbeYJoeuLgebg5qF","2MvGd2Mk4urBjpjRZ6ne6wRLT78XWUZo6er","2NDxEJqswyuZa8wRXKLHXKyZkTYkitqKaZk","2N8EpTYevKcS5faxVzEhF5DHgsWcsVjw6zH","2MxKCziNX6xe1SZm2sdgjRbqzmQXKVmuGvX","2MzYey51NYRUwQFgu6kc3a2ihRWVWALfvcC","2NBfsH5a8Br8NWHBR57P6TXfmqwbAZ9qgVk","2N3BpXYEKow8BxDKiJWsHtpqmve8F4hBifk","2NCqPYPqeiu1D44FypGDvzTczBdie83fpEJ","2N5yprMcT61Sjqvt94hqsRpdGawmeGYaWBK","2N2Ac1YVPE9f652BA8DkrPQ24oy1Wgk5Bom","2MwKhQ8QvHURpqct5XJJeYGjEWP86URhpmn","2N6NnST3oY9HE8emUQhVi8KQ1FGrY5QoLhe","2N6EfDgD3Qi8f1kStXM7zrkhFBEWqudYz3X","2N1farW9Ti9Nc3vi4ZqCza4uwRt2jhD9Wck","2NFx5LPgRbd2S3ZHsACeQeGejZA3ge11s1c","2NEjFV59BoMnjwNRrMLsgug4owGrZybLPKo","2Mx6LXWDbUM7L7kJSTtpRbfpjbbLBTGCcwp","2Mt9BWz9bN8gyBFFytWhkApY1ZnRZqi64fs","2N2nk4c2mpuz2pREibVGdzAwZ6Gkf5EFLc4","2NFsJHo8248js5HxsQNyfmDaCHPvJEc5Apr","2N37naVHeKPTViRgvHzyRPDdATHKtjY7YbL","2ND5BJCtL5GqKHKUnQo4BD3UkLp2xFZX8Z3","2Mxq3R5GiWSzJviFncCbns5Pgaw14nM9m3z","2NCc95DE7n5tnJZCaSBnCrjLVWzg9feRi9U","2NBbazgxYaPLnB3uSqryn5CaXdvbVo2QyMz","2N3mg9mti798sbuRhH9Cx9e2ReEEPZYBfjo","2Mx9MvRnWTbg211nUhtFjFeT48Nz97f1JNf","2N1SZpY3kuHfVBPcLY8k1sYLem5YoPhybvT","2ND7HCJq1da1GiK7bB9NiWUfDVQfXkWWJ1j","2NE2pYeqpj8yWQARFvv1HpXBGidAWDeUM9s","2MyPQhRHUtedg8iALryD6LQ2UXgjfmfvTBB","2NDSuDbyTFXEbEHPufNpfEaK5jATAqsj9Ug","2NDanpPo5Cjbprs8pgQumDHGqVb1U6qfhbH","2NBfE8YJDBfRVwtF61RmytFTQSzP1N6v93Z","2N3g9GtUJwNbhueDa8wmRVEG7B317YkgLt6","2NFFAXouDpo8K5yw3dkDPW1KaTjWQnaqR9Y","2N6VcVLQx6VVuoXfGHsVThqZsWLA9hteQ1n","2NCrooSPmzmsSueRaNxZ3cuvTpNHhiaXdXp","2NCP9x2WZ7MEMceY3G6EFwMR2jH3eirFZP8","2N6H92vaTNkLr3EZiYcv25RFBCJLZp6KWm6","2Mxg618odGqKnHGWc1ztEJmVKF6yG7uPfqj","2NFkCfwXurHaGZKxCUCnkwrJVNS7tfTXhsi","2Mv86KqLcJXyeuufi7Ds6QvW2aDG7Z8JJTF","2N6KLmUrZQgVaFxHar64fyqhB93umwXNuhz","2MvJHZh9NzkskcxPWnqnKXRSRpvD1VbcLuj","2NEKbX7RjPWFkqrkTQbEh9JCNKF6cD1SWUw","2N9aJdeN6tgbbeWv3zyVsHPK8e45GBbFU9Z","2NELUVqDuNHCiNxtWRagpk6KrDEBzG646tZ","2NGCwimiXhcSLrRMP8Lu3XJhjrMHFWRH6ub","2MvnPByVkLpDU4VtVhNVne1xaCRLmQF7vad","2N1QqBFEr4ZQyVnZnKarRhWNayFgicaDFXN","2N5rcdBpYLCMoJPC7nBVzQg2jt3AoQZbnKd","2N2sGhtCQ1wBaH85AciZLauHdDqT857tymd","2N56BQoqgxM4zG6ijWVvA4UJixzYFPaA1sV","2MzQ456CVGDFgUVb7vmVBCD7sKCXVuEngqB","2Mtq4KYQfWqHvGKmUQQa2SLKN5WkYc9zD7m","2NEXmLnzz1YTHMFUXyzopz3WyH7WU7uVMwi","2N3LtPgwSmjXQybeKmjEzDui5KvdJUvp6Zo","2NEBZFvFV4dSiDqSKHa3P2VmkioWrmANiGA","2NGHwYapHt9UJ2E22Maf15UWo8NASQgSh1p","2N3L7YjxTUAuzkLTqMd6p8vVXCYNaHFY2RK","2N9vVcfJeaLedWf4TFaKUThfhhHzkCGpfmf","2N7xrygAtz3dzfEZVykVAvscPsPScvaTGnw","2NEYqkpGNKK61yQJdX4on2RCV9yza5ZoHqE","2N2QKWsauJpPqDg53EWMSBENbR3rSJbqkGt","2N4sg7XkKs6rxMBNdEeesPu25WoQdAGuN8T","2N92hGzn3tWYsLYbPWqVtsZbvooeqbctama","2MuuNsczrZFwA95JtKZcvthgBQnGcn8uUbE","2N81Tbtwadqwn1XXJ79k5PUQDgFxtTeAnPR","2N2A1nbhHUEqMYQcReKbXKMacXZysFpyMG4","2MxF4rAnDGn4RLjmZvZuhmEhxbpYKb5esZt","2NGST75PgZZKC1ZheXGvP7JQCaJ7qVFpNbK","2N3xV6p86y8GaP9koYx8NkeVw9UXxjpE7UX","2N8LSZm4FrSUnemndEZU3xsE1PTHY1YM8FF","2NFaLUdDjHdXRJSTL4pY4HgXWahZZBwfJfZ","2MsQL7PrMtDLtTcMbz46W5R51zBJujfDmAJ","2MvCZWBFT6To3fTL2ecMVPhWxdn3y3pj3C3","2N1xhbQPbeALjFNfqRtjXgJdb3UUdYtSZvT","2N5NdubhJ3xdqf4zEypydXLFqExSs6GV4WW","2Mvyh5529wfUmThBLg5gV28iC9vd2wa6NCY","2NCjGjjbmJ49yzrUJZVQtRmDL9WqcRgqqfn"]}',
			)
			.reply(
				200,
				'{"data":{"2NFJNgNKsTDN3dCcFnu4TU9wAv5dK8tNYqT":true,"2NEPkmdoupAyXarciUDeJCS91LCohgHHoGT":true,"2N7r2MdRF8crWp9n31FGS4khEzbCxqyhyt8":true,"2Mtn7RtFkegoK1jrTTsnrfND7SeeTEvjEtk":true,"2N53JYnPGnHR8n2h2pn2P7KAZxqhDoWY67A":false,"2MsgNpeb3fyevANfqmPYTFp5jdn9LU28wzt":false,"2N4W4SAnbSqpb7XNC6upJ4XuER29yEf4Rn2":false,"2NGMPrjN9Kcz2Z9jNhPUcCbWkxTy1pWbXRY":false,"2N6VBnE4UQyNsk3gdcQ75gKXToVpY5mkGBr":false,"2NGKfiHfTe58Rxe4LX13Bfc57qyZ8LD1hyP":false,"2N5hbkQ1FV97iqSFuqeRkYGj6xoV2V1qTcK":false,"2N99BxgDjBRVkMt5LwP2yR8nAFcA6mwF6o2":false,"2MyRwooR4AYmT1kUNaVb5nChEwLQk25P3Fx":false,"2NCGhJpGdmQ6jT8i8SH7vCJrYt84WxZ8E1j":false,"2MuTCcJiqSNrVZXkfqgxVVRMGWYUhEraEEk":false,"2N2qfsidLiyTV5e8NmMxBvRaTtezN3QMTmd":false,"2Mse6jBMJdQLTqFCPB6Eiae7644TwjeP1xG":false,"2Mvh2xTYn9saQW2vnXZ92rBcBVamUdtf4kk":false,"2NCDfhtPB8NaYjB4GpLVbeYJoeuLgebg5qF":false,"2MvGd2Mk4urBjpjRZ6ne6wRLT78XWUZo6er":false,"2NDxEJqswyuZa8wRXKLHXKyZkTYkitqKaZk":false,"2N8EpTYevKcS5faxVzEhF5DHgsWcsVjw6zH":false,"2MxKCziNX6xe1SZm2sdgjRbqzmQXKVmuGvX":false,"2MzYey51NYRUwQFgu6kc3a2ihRWVWALfvcC":false,"2NBfsH5a8Br8NWHBR57P6TXfmqwbAZ9qgVk":false,"2N3BpXYEKow8BxDKiJWsHtpqmve8F4hBifk":false,"2NCqPYPqeiu1D44FypGDvzTczBdie83fpEJ":false,"2N5yprMcT61Sjqvt94hqsRpdGawmeGYaWBK":false,"2N2Ac1YVPE9f652BA8DkrPQ24oy1Wgk5Bom":false,"2MwKhQ8QvHURpqct5XJJeYGjEWP86URhpmn":false,"2N6NnST3oY9HE8emUQhVi8KQ1FGrY5QoLhe":false,"2N6EfDgD3Qi8f1kStXM7zrkhFBEWqudYz3X":false,"2N1farW9Ti9Nc3vi4ZqCza4uwRt2jhD9Wck":false,"2NFx5LPgRbd2S3ZHsACeQeGejZA3ge11s1c":false,"2NEjFV59BoMnjwNRrMLsgug4owGrZybLPKo":false,"2Mx6LXWDbUM7L7kJSTtpRbfpjbbLBTGCcwp":false,"2Mt9BWz9bN8gyBFFytWhkApY1ZnRZqi64fs":false,"2N2nk4c2mpuz2pREibVGdzAwZ6Gkf5EFLc4":false,"2NFsJHo8248js5HxsQNyfmDaCHPvJEc5Apr":false,"2N37naVHeKPTViRgvHzyRPDdATHKtjY7YbL":false,"2ND5BJCtL5GqKHKUnQo4BD3UkLp2xFZX8Z3":false,"2Mxq3R5GiWSzJviFncCbns5Pgaw14nM9m3z":false,"2NCc95DE7n5tnJZCaSBnCrjLVWzg9feRi9U":false,"2NBbazgxYaPLnB3uSqryn5CaXdvbVo2QyMz":false,"2N3mg9mti798sbuRhH9Cx9e2ReEEPZYBfjo":false,"2Mx9MvRnWTbg211nUhtFjFeT48Nz97f1JNf":false,"2N1SZpY3kuHfVBPcLY8k1sYLem5YoPhybvT":false,"2ND7HCJq1da1GiK7bB9NiWUfDVQfXkWWJ1j":false,"2NE2pYeqpj8yWQARFvv1HpXBGidAWDeUM9s":false,"2MyPQhRHUtedg8iALryD6LQ2UXgjfmfvTBB":false,"2NDSuDbyTFXEbEHPufNpfEaK5jATAqsj9Ug":false,"2NDanpPo5Cjbprs8pgQumDHGqVb1U6qfhbH":false,"2NBfE8YJDBfRVwtF61RmytFTQSzP1N6v93Z":false,"2N3g9GtUJwNbhueDa8wmRVEG7B317YkgLt6":false,"2NFFAXouDpo8K5yw3dkDPW1KaTjWQnaqR9Y":false,"2N6VcVLQx6VVuoXfGHsVThqZsWLA9hteQ1n":false,"2NCrooSPmzmsSueRaNxZ3cuvTpNHhiaXdXp":false,"2NCP9x2WZ7MEMceY3G6EFwMR2jH3eirFZP8":false,"2N6H92vaTNkLr3EZiYcv25RFBCJLZp6KWm6":false,"2Mxg618odGqKnHGWc1ztEJmVKF6yG7uPfqj":false,"2NFkCfwXurHaGZKxCUCnkwrJVNS7tfTXhsi":false,"2Mv86KqLcJXyeuufi7Ds6QvW2aDG7Z8JJTF":false,"2N6KLmUrZQgVaFxHar64fyqhB93umwXNuhz":false,"2MvJHZh9NzkskcxPWnqnKXRSRpvD1VbcLuj":false,"2NEKbX7RjPWFkqrkTQbEh9JCNKF6cD1SWUw":false,"2N9aJdeN6tgbbeWv3zyVsHPK8e45GBbFU9Z":false,"2NELUVqDuNHCiNxtWRagpk6KrDEBzG646tZ":false,"2NGCwimiXhcSLrRMP8Lu3XJhjrMHFWRH6ub":false,"2MvnPByVkLpDU4VtVhNVne1xaCRLmQF7vad":false,"2N1QqBFEr4ZQyVnZnKarRhWNayFgicaDFXN":false,"2N5rcdBpYLCMoJPC7nBVzQg2jt3AoQZbnKd":false,"2N2sGhtCQ1wBaH85AciZLauHdDqT857tymd":false,"2N56BQoqgxM4zG6ijWVvA4UJixzYFPaA1sV":false,"2MzQ456CVGDFgUVb7vmVBCD7sKCXVuEngqB":false,"2Mtq4KYQfWqHvGKmUQQa2SLKN5WkYc9zD7m":false,"2NEXmLnzz1YTHMFUXyzopz3WyH7WU7uVMwi":false,"2N3LtPgwSmjXQybeKmjEzDui5KvdJUvp6Zo":false,"2NEBZFvFV4dSiDqSKHa3P2VmkioWrmANiGA":false,"2NGHwYapHt9UJ2E22Maf15UWo8NASQgSh1p":false,"2N3L7YjxTUAuzkLTqMd6p8vVXCYNaHFY2RK":false,"2N9vVcfJeaLedWf4TFaKUThfhhHzkCGpfmf":false,"2N7xrygAtz3dzfEZVykVAvscPsPScvaTGnw":false,"2NEYqkpGNKK61yQJdX4on2RCV9yza5ZoHqE":false,"2N2QKWsauJpPqDg53EWMSBENbR3rSJbqkGt":false,"2N4sg7XkKs6rxMBNdEeesPu25WoQdAGuN8T":false,"2N92hGzn3tWYsLYbPWqVtsZbvooeqbctama":false,"2MuuNsczrZFwA95JtKZcvthgBQnGcn8uUbE":false,"2N81Tbtwadqwn1XXJ79k5PUQDgFxtTeAnPR":false,"2N2A1nbhHUEqMYQcReKbXKMacXZysFpyMG4":false,"2MxF4rAnDGn4RLjmZvZuhmEhxbpYKb5esZt":false,"2NGST75PgZZKC1ZheXGvP7JQCaJ7qVFpNbK":false,"2N3xV6p86y8GaP9koYx8NkeVw9UXxjpE7UX":false,"2N8LSZm4FrSUnemndEZU3xsE1PTHY1YM8FF":false,"2NFaLUdDjHdXRJSTL4pY4HgXWahZZBwfJfZ":false,"2MsQL7PrMtDLtTcMbz46W5R51zBJujfDmAJ":false,"2MvCZWBFT6To3fTL2ecMVPhWxdn3y3pj3C3":false,"2N1xhbQPbeALjFNfqRtjXgJdb3UUdYtSZvT":false,"2N5NdubhJ3xdqf4zEypydXLFqExSs6GV4WW":false,"2Mvyh5529wfUmThBLg5gV28iC9vd2wa6NCY":false,"2NCjGjjbmJ49yzrUJZVQtRmDL9WqcRgqqfn":false}}',
			)
			.post(
				"/api/wallets/transactions/unspent",
				'{"addresses":["2NFJNgNKsTDN3dCcFnu4TU9wAv5dK8tNYqT","2NEPkmdoupAyXarciUDeJCS91LCohgHHoGT","2N7r2MdRF8crWp9n31FGS4khEzbCxqyhyt8","2Mtn7RtFkegoK1jrTTsnrfND7SeeTEvjEtk","2Mx8BgV28sZNRfxej4LYwdQFxuAVFfomE5x"]}',
			)
			.reply(
				200,
				'{"data":[{"address":"2Mx8BgV28sZNRfxej4LYwdQFxuAVFfomE5x","txId":"1e5d87c6d39346c50a71b48072b95c8e1618d0051d00c1b004d692a26a41c5ad","outputIndex":1,"script":"a9143583ca9ecbbc0243c04bb32a5c91dde5c131fc3287","satoshis":59832},{"address":"2N7r2MdRF8crWp9n31FGS4khEzbCxqyhyt8","txId":"de148feda978c203f529781f72ff1539fa5c82f033bd8c60ecf3861f75010eca","outputIndex":1,"script":"a914a0269c180ab12c2334ac5af78a585098c71a1aac87","satoshis":50000}],"links":{"first":"https:\\/\\/btc-test.arkvault.io\\/api\\/wallets\\/transactions\\/unspent?page=1","last":"https:\\/\\/btc-tearkvault.iohq.com\\/api\\/wallets\\/transactions\\/unspent?page=1","prev":null,"next":null},"meta":{"current_page":1,"from":1,"last_page":1,"links":[{"url":null,"label":"&laquo; Previous","active":false},{"url":"https:\\/\\/btcarkvault.ioenthq.com\\/api\\/wallets\\/transactions\\/unspent?page=1","label":"1","active":true},{"url":null,"label":"Next &raquo;","active":false}],"path":"https:\\/\\/arkvault.ioarkvault.io\\/api\\/wallets\\/transactions\\/unspent","per_page":15,"to":2,"total":2}}',
			)
			.post(
				"/api/wallets/transactions/raw",
				'{"transaction_ids":["1e5d87c6d39346c50a71b48072b95c8e1618d0051d00c1b004d692a26a41c5ad","de148feda978c203f529781f72ff1539fa5c82f033bd8c60ecf3861f75010eca"]}',
			)
			.reply(
				200,
				'{"data":{"0e7c8d50be1aa71613639f76cfe35ddac1156d19aceb89f863df6705ecd96604":"02000000000101ad50d19f3034e2567154f124f50b9e05b5d03e94c0d56850c5816b595a5066b60000000000feffffff02f8066bf800000000160014e671188482f05257bd430a07726b67a6f98308cd504001000000000017a91410cf8bb60a5b5bace28e56031d17180fcd978bde870247304402203b14e5c986c038f7ae347bdfff842f01a2cec9522ffe785533ae31ff28d7708602200449400cf9e94b2a56e5af13294adcad859c9c935e35bd8b5ca00a66dd316ba101210338d9daec109917cd56e0c2397ced2925537f96cc1520243acf8c39115f79c81c5dfa1f00","1e5d87c6d39346c50a71b48072b95c8e1618d0051d00c1b004d692a26a41c5ad":"01000000000101d4e042fb27460be8d962578bf183d11a348517ea8a601e0395bfeaaac96e2942010000001716001471897d984468d8fb600b2eba60ee3d737c90ea6b0000000002409c00000000000016001459a4852c42177df1e9f8375a1b05f8e32825bfd7b8e900000000000017a9143583ca9ecbbc0243c04bb32a5c91dde5c131fc328702483045022100a3bbfb14c02491d4dd82529ce5d6022577dd4f02dcc0c0a58199f0c3ef0038e502205b8b97fe2fa274cf376f3b1b48e2630ce597d0e8975087e14c41e91382841b3d0121038bd2835af1ed447588b19d896ed4c550084bb3dc5f5e6b4998ed8b4774962f2900000000","de148feda978c203f529781f72ff1539fa5c82f033bd8c60ecf3861f75010eca":"0200000000010154b852d5e2d9859206a99118503a4826e4d1fda1c44a53914992877b556641ed01000000171600143c2c9959f7ad65bcb64bce3a151a606720ce4162feffffff02bf7c60010000000017a914c2f58c308c2617a7ac64ab56902386861c3a7ed78750c300000000000017a914a0269c180ab12c2334ac5af78a585098c71a1aac870247304402204bef84ccc6a3f65a3cdf5245dbf2418c8f47c1a0e7258aad10999bb5457930e802204ebcc7ca62ebca9a54b2d72448778d97b0cf2172fc8680b015e88f8c76321cb60121033dcbec2ffb07ff25faf068a0985fd6696158c473b2a7b0e22ed6ee7bea3d984a5cfa1f00","9b31418b044d84f58ba872fac6ab67307b07c3cbc8246031d3126b84711f8b46":"02000000000101a66846072604baf348e66450a762908dda436fa5906353f011d8f15a2e531c440000000000feffffff0297fc340a00000000160014deeba0420aa31b1409f301a8839bac3f6900ce7d504001000000000017a914e7f7aa23c770e0b74f66479173259dadb6e36a2d8702473044022025be7a059d594c2c8119693799c5dfb6a0cb47cfd11d9ed9dc2c81a296754179022043dfd94cba1846961c6756366d568e39116fd62ff3b1c45912eaa4e6f0cb8ca6012103b1622e8a09774ef539d5767cff55a0481eb3b4fb7ed26ace7c5677483ed5399161f61f00"}}',
			)
			.get("/api/fees")
			.reply(200, {
				data: {
					avg: 0.000_000_1,
					max: 0.001_806_17,
					min: 0.000_010_74,
				},
			})
			.persist();
	});

	it("should generate a transfer transaction and sign it with ledger nano", async () => {
		const signatory = new Signatories.Signatory(
			new Signatories.LedgerSignatory({
				options: {
					bip49: {
						account: 0,
					},
				},
				signingKey: "doesn't matter",
			}),
		);

		const result = await configureMock(ledger.transfers.bip49.record).transfer({
			data: {
				amount: 0.0007,
				to: "tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn",
			},
			signatory,
		});

		assert.is(
			result.toBroadcast(),
			"01000000000102adc5416aa292d604b0c1001d05d018168e5cb97280b4710ac54693d3c6875d1e01000000171600148eb5fdd59771c49650cf7808784fe080d532b307ffffffffca0e01751f86f3ec608cbd33f0825cfa3915ff721f7829f503c278a9ed8f14de01000000171600140f49ae97db28cee136efb9c15fbd9fa87df6cca5ffffffff027011010000000000160014f3e9df76d5ccbfb4e29c047a942815a32a477ac4c09100000000000017a914cd7c51c3f3a5ad8533215c499e55fef1d07f852d87024730440220624fca06ae5bf584e37f0a252c0d9a56fbf6d672153a5e5305cfcbb0c4a255c90220589a693fe06609cfb35177962f31b5d1fd492a402041e9283118a0d5b79a4a36012103de2db824354a86e663d615af1982e9ddf9a16565175961670f32091600ec1b2802473044022061219ee1d48659620c33e0482912ea03cdc730fba3c4f1a4807d4f8bb921dd3402200553d1aa9a19d9604df6304e12ce288ad4a1b764ad5166df68afa3af9095dcbe0121021e723637da0432ff9e9de6fdac2a070daaeaf6d6cb795ae42a965b81941e59ac00000000",
		);
		assert.is(result.id(), "6b4e9e2051f1617ef1fa0a712e5b5b4d660fabddac8351077a62ffb439ca1813");
		assert.is(result.sender(), "2NFJNgNKsTDN3dCcFnu4TU9wAv5dK8tNYqT");
		assert.is(result.recipient(), "tb1q705a7ak4ejlmfc5uq3afg2q45v4yw7kyv8jgsn");
		assert.is(result.amount().toNumber(), 70_000);
		assert.is(result.fee().toNumber(), 2520);
		assert.instance(result.timestamp(), DateTime);
	});
});

describe("BIP84 wallet", ({ beforeAll, it, assert, nock }) => {
	beforeAll(() => {
		nock.fake("https://btc-test.arkvault.io:443", { encodedQueryParams: true })
			.post(
				"/api/wallets/addresses",
				'{"addresses":["tb1qwzwugs68sv2f8svsuredhr8ddvnc8tksef5yz3","tb1qtxjg2tzzza7lr60cxadpkp0cuv5zt07h0r2hxs","tb1q0jeyzuj3fwz6nyughmmdsap47xl8zkxcgrta2j","tb1qp4ekevzujt0mcgxvm5lhz2svaujq3qsjrv864d","tb1qdzt03vpcnq4xtcgalgj8je75crmt98ahwd56h6","tb1qgp5hrr4kvplfjg6rnr3her89duz6sgcjr9l6xg","tb1qtcpgl08nh52wtqgndhr7wssa0aw5288nj83w58","tb1q6utl7cpzt6dnm8sp5v8279yxmv2ufu9a4fhuy0","tb1qu2nhuylpw9djpejejzjv8x43qfw7h72qq49hyz","tb1qlnsmeq973nlpkn3dfrgzdtmxm7sxwwnkcmpcz3","tb1qupf7xlutsld6ajpe33z7njlum87qnpx6ug9vj9","tb1qh5gvyp77juyh6tw0y3pfkgpmfh885su7tsn2cr","tb1quf58kja4u48xkgpqdzcsunyafx3w83prvalczq","tb1qr5u0nj2v3p4fxdlnhy6j0xw8ajmlnaxgf5zwy9","tb1qzz96d5w6q3rvjmharjxeft53826y00eyykjk43","tb1q0rnzxz59djmhdh6ej6apk7gg4dvyv205ued4fl","tb1qu2qmfvd559w7z57u0z6kpw2us4mg5fm0my3jdu","tb1qe6zdvnvqgchsxwpg58nkqqdnzv2esn4wx4ekt3","tb1qs84p0jy342cj8ylvxvrtjrpz9l64369uwpcy3p","tb1qvy9mdyfprzauhva9kfsfl7pl8g6j8clp4w85w0","tb1qqjfdux0x5dltzy5hnmgcrnazgq4xcfl7t70xyw","tb1q6rl6ad84g7hww59dwmzsqxhmx5q989fx3378cs","tb1qgpfcm8ug0a9j4lkc77pm29gukl30l9hta2tty2","tb1qdkfqe29cyklwh9mlvsu93qqkj9tx9hrpj9vcpy","tb1qu9swqvrfkmza5jzxze0e83yruenrqfkyz42vch","tb1ql65ylgcypcrdraa4e8tjfwj2dlu5y4kxtjz057","tb1qzykv02g9z9u3vzksjz0ta9xslnsskytpcxjar7","tb1qxmkcgulllpd256ft6zm9pm56tltapw8nhyethm","tb1qrwjvnttd9ddvjspkf77p7maan3snpf09unaugd","tb1q7tarkqsfgteqx79r2t20uwtzl9vva0wx0k4ayz","tb1qlgvxqyl6w35702k2u2939nn9yk59ke453gc8du","tb1q88p4j7zgz9qkmmqn2hnpedtvyydadmf8f0nqce","tb1qveme33aqk50pcgf8ha0x7yk7070zn24adr56vr","tb1q8cvxlzztlx4kjmxw69k0l3mw7gpg7dwyen7t63","tb1q8ecj0zt4wx9nwfvv7zzdd4a5hqft4vweqy5u98","tb1qc4yzwmqf5dj60rkzrjwrl6y3p2hjxvmfz6335g","tb1q03zk0hqnn6efw6jgjxzdh8ecapwe0zq3wn42cl","tb1q5taend7m5cu7t320uwdeeqvxdg2qvj3knh9xqh","tb1qfr6taz70f5nal6p8yu0w0p42tdhl8y5stc0wyh","tb1qk0rfj3fmfaxym8jzzghw7xj0hvey2a6nqtsk25","tb1qgfh9l7mexv9e46tztt9m73reke9u48q6uunmhu","tb1qaa6u30n6t33x3qtkfqgr0csaudv67gn3lf8g6d","tb1q5p2z4m2zcdx4d2lnh07y43qfkzssdz0aqy2wsp","tb1qrj38tggucdz80pwn3qa8862laa8s68cyhc2l7k","tb1q9vuv9rxdcuekrzc7cnwphltdd3jkfrrrcra7er","tb1q3efwr9h42h67wqgqhr8vkhhn8jh75307ndk65z","tb1q5fvq44fnq4u8p6jn83my26ryfy2urqppghavl8","tb1q9tdrprakpaa988mfc8rcz8pz463h0m0nrf522w","tb1qmuc75aqktsuqcx0euzmxx80kfskytt5tnukr52","tb1q7tjr75nnk6jcja50mhclnvrerx24umv5wh0sy0","tb1q0lynmvww482c655eykytt8cayvmmre4je5qwvv","tb1qpvwctppnn7z42zgkcxuqwlvn3h5gqdwrpvxz3q","tb1qexrzqvj2zwedpzvx9wygtvxwt60vf8v3pzshmr","tb1qfyq8zvc5d2qg4kuaj73qgsp8fjr2rsmvlkvpme","tb1qu57cwgs7qsxm8qup7rsxtj66fe5ga535ll2hfp","tb1qee2tzzywvurq25rk40mts9ktepe54a3zftm2yx","tb1qej8tsceu9md3zg0v65hwyeer2gc6jvyk0qtdnp","tb1qk9fufzr5v4n4r5gwdtp0k936m68jttm6hcaxe7","tb1qjqxv88rt5r6hu3x2ss6rwdstz7efyp5hufcpd4","tb1q0rwmmpuyuzyfzglksxuahwqckxarqmhd0pvfp7","tb1qzxkrjd7s600c4f3a2lltm9hkkxut77ewu4unsp","tb1qg80u5d8uczmaumwu33deejppsqjujtax9r9dhc","tb1q8cgvxnmgwhyp3ep2zpx2cxhufl9pk63qdxm26d","tb1q3spthwkc28zdc23yn435vv2z8ewda694u4m9a0","tb1qweawrnsqe5vxdmpjfwyqx9s9r37pwnvypygve5","tb1q6w7866urtvha9t6kq65est66z9ufx2vuueqfpx","tb1q00hfkswhpy70mrssqqqh0x22r7jsmzt33f56ep","tb1q04unutzqzj7ly984pvkffc75f023l5vc4639yu","tb1qgvpuuwjev6e6e8f7qrtsunnsc9ldnt24ewrwfd","tb1qu2gssd6t5krj9lurjy6dnk0tnfwg22pajvw9my","tb1q3s6gvwctm94h5j5jp7su5l4wxupw5qnvs4nwjv","tb1q45mp7jusv8q0ksq0enfagt6z0kx0ef6gdzv5p9","tb1qassvj4kccfwmevt3d6ee8j8zzwr2luynwpsp0a","tb1qmhrc3xrj9z4zuhkvvhx45vulspgg0j4nl3ykm4","tb1qhkrtsvlnntlwqfev5egcd02h54ualu2ss8zmjm","tb1q3ws0px0ehkg6xueucf7dsqwz2cj2fszs2mpym9","tb1qphn2683pdvpz5lgndl5ref486aehp30ghgeqw9","tb1q69ct8fadgrx0gz8kpze3msnefew5k9r3xxa8yk","tb1q70y6wq5twl2hjycehn8cgj3y2xgnq0qcem8elm","tb1q2pugxd8avs5ewk3cfq6d6c25ug9yf7r3278s5x","tb1q3n8a2mhsav2wuxm0myeatuemce8m7d2z3f37ta","tb1qapqysswftgya80ec3svav4n9sjryc3uy07t5wk","tb1qxv33cmhzgzkmpdtyduzxujtz3xy8m8f37g3mps","tb1q7uamgk7mhrwhczfeuxasm0csyq5a8qyyng4ac4","tb1qwlhdldau0778uw30cnfkhs4g5k0rnzdzvph6gt","tb1qprxun35jdxfd9hfcps58atyx5rsl487wkxuw72","tb1q9599m2gx9kmtxty4hg4np0dkn0nx8e4dts735w","tb1qut5a3g6xzse2x8w6rw5uqj8ev5jj0cud8jlrew","tb1qusmz2sygj7yn9jthvjaqm4n2l8kj783wgq6fdy","tb1qntqz4443sya2cm3vevhc2hgxljtykt7f5kkl6x","tb1qthptzxnvw7hvv9ph8vr5lgexwsdgq2zl7yr0pw","tb1q9e9yz469vpyyexjf9lpyf5cnxsnvegptyk40rw","tb1q2q0zgn9yf9pgfhxzu9hg9a3hcu6u77d9p8f2n0","tb1q0yer2sty4rsjcat2qn722pt806h89fpa7q3r9x","tb1q7q6ry5cm57e2qk549zpylpznlzuc03zya3luzv","tb1q2uv9y43l4jyszf7y4mmgrpqn38ll6rkcapyvz9","tb1qzya00lztregd6sx5pkql9guzzp9g00fxh2xk2j","tb1qrnlu25nn8h5rnv8dwys9ffkv0fcw7acrqpu09m","tb1qsenufe757js32mmrdq7mgzuzhsrl0ve6rld7gq","tb1q87xhsk5r3rkjgrdgqapv3yns5hhsu0zdj2n69n"]}',
			)
			.reply(
				200,
				'{"data":{"tb1qwzwugs68sv2f8svsuredhr8ddvnc8tksef5yz3":true,"tb1qtxjg2tzzza7lr60cxadpkp0cuv5zt07h0r2hxs":true,"tb1q0jeyzuj3fwz6nyughmmdsap47xl8zkxcgrta2j":false,"tb1qp4ekevzujt0mcgxvm5lhz2svaujq3qsjrv864d":false,"tb1qdzt03vpcnq4xtcgalgj8je75crmt98ahwd56h6":false,"tb1qgp5hrr4kvplfjg6rnr3her89duz6sgcjr9l6xg":false,"tb1qtcpgl08nh52wtqgndhr7wssa0aw5288nj83w58":false,"tb1q6utl7cpzt6dnm8sp5v8279yxmv2ufu9a4fhuy0":false,"tb1qu2nhuylpw9djpejejzjv8x43qfw7h72qq49hyz":false,"tb1qlnsmeq973nlpkn3dfrgzdtmxm7sxwwnkcmpcz3":false,"tb1qupf7xlutsld6ajpe33z7njlum87qnpx6ug9vj9":false,"tb1qh5gvyp77juyh6tw0y3pfkgpmfh885su7tsn2cr":false,"tb1quf58kja4u48xkgpqdzcsunyafx3w83prvalczq":false,"tb1qr5u0nj2v3p4fxdlnhy6j0xw8ajmlnaxgf5zwy9":false,"tb1qzz96d5w6q3rvjmharjxeft53826y00eyykjk43":false,"tb1q0rnzxz59djmhdh6ej6apk7gg4dvyv205ued4fl":false,"tb1qu2qmfvd559w7z57u0z6kpw2us4mg5fm0my3jdu":false,"tb1qe6zdvnvqgchsxwpg58nkqqdnzv2esn4wx4ekt3":false,"tb1qs84p0jy342cj8ylvxvrtjrpz9l64369uwpcy3p":false,"tb1qvy9mdyfprzauhva9kfsfl7pl8g6j8clp4w85w0":false,"tb1qqjfdux0x5dltzy5hnmgcrnazgq4xcfl7t70xyw":false,"tb1q6rl6ad84g7hww59dwmzsqxhmx5q989fx3378cs":false,"tb1qgpfcm8ug0a9j4lkc77pm29gukl30l9hta2tty2":false,"tb1qdkfqe29cyklwh9mlvsu93qqkj9tx9hrpj9vcpy":false,"tb1qu9swqvrfkmza5jzxze0e83yruenrqfkyz42vch":false,"tb1ql65ylgcypcrdraa4e8tjfwj2dlu5y4kxtjz057":false,"tb1qzykv02g9z9u3vzksjz0ta9xslnsskytpcxjar7":false,"tb1qxmkcgulllpd256ft6zm9pm56tltapw8nhyethm":false,"tb1qrwjvnttd9ddvjspkf77p7maan3snpf09unaugd":false,"tb1q7tarkqsfgteqx79r2t20uwtzl9vva0wx0k4ayz":false,"tb1qlgvxqyl6w35702k2u2939nn9yk59ke453gc8du":false,"tb1q88p4j7zgz9qkmmqn2hnpedtvyydadmf8f0nqce":false,"tb1qveme33aqk50pcgf8ha0x7yk7070zn24adr56vr":false,"tb1q8cvxlzztlx4kjmxw69k0l3mw7gpg7dwyen7t63":false,"tb1q8ecj0zt4wx9nwfvv7zzdd4a5hqft4vweqy5u98":false,"tb1qc4yzwmqf5dj60rkzrjwrl6y3p2hjxvmfz6335g":false,"tb1q03zk0hqnn6efw6jgjxzdh8ecapwe0zq3wn42cl":false,"tb1q5taend7m5cu7t320uwdeeqvxdg2qvj3knh9xqh":false,"tb1qfr6taz70f5nal6p8yu0w0p42tdhl8y5stc0wyh":false,"tb1qk0rfj3fmfaxym8jzzghw7xj0hvey2a6nqtsk25":false,"tb1qgfh9l7mexv9e46tztt9m73reke9u48q6uunmhu":false,"tb1qaa6u30n6t33x3qtkfqgr0csaudv67gn3lf8g6d":false,"tb1q5p2z4m2zcdx4d2lnh07y43qfkzssdz0aqy2wsp":false,"tb1qrj38tggucdz80pwn3qa8862laa8s68cyhc2l7k":false,"tb1q9vuv9rxdcuekrzc7cnwphltdd3jkfrrrcra7er":false,"tb1q3efwr9h42h67wqgqhr8vkhhn8jh75307ndk65z":false,"tb1q5fvq44fnq4u8p6jn83my26ryfy2urqppghavl8":false,"tb1q9tdrprakpaa988mfc8rcz8pz463h0m0nrf522w":false,"tb1qmuc75aqktsuqcx0euzmxx80kfskytt5tnukr52":false,"tb1q7tjr75nnk6jcja50mhclnvrerx24umv5wh0sy0":false,"tb1q0lynmvww482c655eykytt8cayvmmre4je5qwvv":false,"tb1qpvwctppnn7z42zgkcxuqwlvn3h5gqdwrpvxz3q":false,"tb1qexrzqvj2zwedpzvx9wygtvxwt60vf8v3pzshmr":false,"tb1qfyq8zvc5d2qg4kuaj73qgsp8fjr2rsmvlkvpme":false,"tb1qu57cwgs7qsxm8qup7rsxtj66fe5ga535ll2hfp":false,"tb1qee2tzzywvurq25rk40mts9ktepe54a3zftm2yx":false,"tb1qej8tsceu9md3zg0v65hwyeer2gc6jvyk0qtdnp":false,"tb1qk9fufzr5v4n4r5gwdtp0k936m68jttm6hcaxe7":false,"tb1qjqxv88rt5r6hu3x2ss6rwdstz7efyp5hufcpd4":false,"tb1q0rwmmpuyuzyfzglksxuahwqckxarqmhd0pvfp7":false,"tb1qzxkrjd7s600c4f3a2lltm9hkkxut77ewu4unsp":false,"tb1qg80u5d8uczmaumwu33deejppsqjujtax9r9dhc":false,"tb1q8cgvxnmgwhyp3ep2zpx2cxhufl9pk63qdxm26d":false,"tb1q3spthwkc28zdc23yn435vv2z8ewda694u4m9a0":false,"tb1qweawrnsqe5vxdmpjfwyqx9s9r37pwnvypygve5":false,"tb1q6w7866urtvha9t6kq65est66z9ufx2vuueqfpx":false,"tb1q00hfkswhpy70mrssqqqh0x22r7jsmzt33f56ep":false,"tb1q04unutzqzj7ly984pvkffc75f023l5vc4639yu":false,"tb1qgvpuuwjev6e6e8f7qrtsunnsc9ldnt24ewrwfd":false,"tb1qu2gssd6t5krj9lurjy6dnk0tnfwg22pajvw9my":false,"tb1q3s6gvwctm94h5j5jp7su5l4wxupw5qnvs4nwjv":false,"tb1q45mp7jusv8q0ksq0enfagt6z0kx0ef6gdzv5p9":false,"tb1qassvj4kccfwmevt3d6ee8j8zzwr2luynwpsp0a":false,"tb1qmhrc3xrj9z4zuhkvvhx45vulspgg0j4nl3ykm4":false,"tb1qhkrtsvlnntlwqfev5egcd02h54ualu2ss8zmjm":false,"tb1q3ws0px0ehkg6xueucf7dsqwz2cj2fszs2mpym9":false,"tb1qphn2683pdvpz5lgndl5ref486aehp30ghgeqw9":false,"tb1q69ct8fadgrx0gz8kpze3msnefew5k9r3xxa8yk":false,"tb1q70y6wq5twl2hjycehn8cgj3y2xgnq0qcem8elm":false,"tb1q2pugxd8avs5ewk3cfq6d6c25ug9yf7r3278s5x":false,"tb1q3n8a2mhsav2wuxm0myeatuemce8m7d2z3f37ta":false,"tb1qapqysswftgya80ec3svav4n9sjryc3uy07t5wk":false,"tb1qxv33cmhzgzkmpdtyduzxujtz3xy8m8f37g3mps":false,"tb1q7uamgk7mhrwhczfeuxasm0csyq5a8qyyng4ac4":false,"tb1qwlhdldau0778uw30cnfkhs4g5k0rnzdzvph6gt":false,"tb1qprxun35jdxfd9hfcps58atyx5rsl487wkxuw72":false,"tb1q9599m2gx9kmtxty4hg4np0dkn0nx8e4dts735w":false,"tb1qut5a3g6xzse2x8w6rw5uqj8ev5jj0cud8jlrew":false,"tb1qusmz2sygj7yn9jthvjaqm4n2l8kj783wgq6fdy":false,"tb1qntqz4443sya2cm3vevhc2hgxljtykt7f5kkl6x":false,"tb1qthptzxnvw7hvv9ph8vr5lgexwsdgq2zl7yr0pw":false,"tb1q9e9yz469vpyyexjf9lpyf5cnxsnvegptyk40rw":false,"tb1q2q0zgn9yf9pgfhxzu9hg9a3hcu6u77d9p8f2n0":false,"tb1q0yer2sty4rsjcat2qn722pt806h89fpa7q3r9x":false,"tb1q7q6ry5cm57e2qk549zpylpznlzuc03zya3luzv":false,"tb1q2uv9y43l4jyszf7y4mmgrpqn38ll6rkcapyvz9":false,"tb1qzya00lztregd6sx5pkql9guzzp9g00fxh2xk2j":false,"tb1qrnlu25nn8h5rnv8dwys9ffkv0fcw7acrqpu09m":false,"tb1qsenufe757js32mmrdq7mgzuzhsrl0ve6rld7gq":false,"tb1q87xhsk5r3rkjgrdgqapv3yns5hhsu0zdj2n69n":false}}',
			)
			.post(
				"/api/wallets/addresses",
				'{"addresses":["tb1qp2c7hrs54lzyhl9725tkyxrwhw4utfucagjk62","tb1q28sfszezu2m897hru9d74dh7ymuufq3qreqe74","tb1qggv0a06dyl0y5wtfp0ng4ldx3e7l05z7vhha9u","tb1q0clqkpstx6kqtc7pcjsq5gqsvvzru2hw23dgft","tb1qp37xzafn5raf0sy9wtk6x4gn65ryrzsuy392cq","tb1qhhptumtv9t2arzqpsjekwxcfr8yxsrmzaelqtm","tb1q5363t2jk5p52wul33vv5pqpdy8kzf34n8hjxqy","tb1qfcauqmu53wenn08lz8vn8r3d05m4pw0t2jva2a","tb1q2knjf7qw6q2evn3lffrrw48rpg5s0w08xs7mjh","tb1q0nahjdqxdghwtk9fwl8w58pe63dcf2ddqc2ujh","tb1qsfksc08negtpm3u5mdysxza9zavlr3psurj40y","tb1q0wumuaw6z536nmut807cag8ptef607asggdx7u","tb1qex89rll2enrvn739t5xdt0nw8sk4td4j2n20sv","tb1ql2yss43fejy2ex05d7www8mvqvp4t5p66ccm30","tb1qjct7ymngtq6qqrlps0q28gu8qfrpyuxc7f9quz","tb1q5j6htpxkwyxqdakjk4hwpc5h8ynty7sel5035v","tb1qkljlrleglask3ncx5djerqr8gygnnmgj36wf7h","tb1qu7pmw9jkzs290q60ltqqzpq55gfrytzsywnuf3","tb1qdzxs3weadduze3ul20rrpy5tqzqse3ht9s0llh","tb1qcuccs8rxevallss7hkaxkudhxfspwyfcv6sq6m","tb1q2zwpvk4pqmytk4rr0ylcg69xly77pmkxnsnlr5","tb1qwm7sjjuh048acz9pz3jqffxadqyymnlmz0yw8e","tb1q3x5888nyxeee7pn85vv74m837zh6ken48naqaa","tb1q40374m9wdv6q4zugg50mvtpa6j03qnlcrszypg","tb1q7pnj7nhh5jrj2nq2hx5qxxeq5hprqe53pg9k2k","tb1ql9ulx4zagx5p9xzd2epjm34m9x4jezn4ueq669","tb1q3pnh9qyaej8rn6zqtgghlxlzmfj0453dspgxzd","tb1qvh0a2gru9j82judjh6rfnsgy4ws0m2293agney","tb1q0nfp7q77nfre8uvvn0ket06w9yaydvpz68p9lr","tb1q04dwnzx83sme2rfln6w4vpmggwjjchjxr8zkx9","tb1qf0tdj68uyzqly3w5en9drqwnz6sa4n6lsk476s","tb1qk8qr5y642jgkhculch3e6pc6v0xge0arnldxmt","tb1qdv5xh4j4njfjuqeqdj2dmhvswvehelayx4m7ym","tb1qpu9scl04pk4j7q7u9vdfz8un2673eh0qy4l0eg","tb1qpsjyh7t7csr8rj2cysyacprtlewp970zerkeza","tb1qqfuy3340a9adthlsw8vhqn60ywcts9pshaetfv","tb1q6kjamng3eguc9xrnslvj3akt22h7lmmjq852vy","tb1qlkdemrc9xu4afg3p8x0zk4c9s7l2d7v726wsrr","tb1qrvus8qlt99zk4yfkd3uvxec4ply8fg0vrdrl3e","tb1qsr5ffrwzgfagrwjyq2pv2srnsefv2edmsvgqwm","tb1qltxv5ms98khhhd2yrkuyeus4sqa5dn8227rgkq","tb1qwacalyc95ap53kuljed28cvwu2sejs7h266k7k","tb1qnv4qmkgpfhyadf9j6wr652nwe99h3seqwmqx7y","tb1qnn7vpp59njhgc38c6utfjzqrnlchcl039yfnhn","tb1qulwap6w2dymnnamfn4tn628l30m6dz40md2kxt","tb1qxns6lceznfjyez4t0e68xl3h6n4dxe57k6h0qa","tb1qejk3882duegrcgl4wzyk4w536ht0fctpmv5rn4","tb1qsthnlj3wfsrvj72pe8w6fsqu4e8nksp05s06sw","tb1qrrwgq7vuawyyk2hj6s9waezj80utrfqugays6g","tb1q97uyjqdm7za7pcyhtu2873vdhemt5u0jl9vd7d","tb1q4hflrpz7c3zradl5ehewhk8smh68jjtpufkhc9","tb1qrsr6k3sn9zwujrlg3pfzp07mwz80qjtrx2yw6z","tb1q08al65sd77pjump4nxycag4w3n4fp63d2smvj3","tb1q62fmnhzpywj7gt8d8amaztc3d9u7ny9m3g7ze8","tb1qgcn3ltjacdmc6ugayt74axl8xg4pz666pw8973","tb1q9fhq04hsxscntfeywv798d9ay3qvw5c7shfn2y","tb1q4f3w2glv82ap822mn8g6tx8qslyjvuaupkj5p6","tb1qr57sat8g3vu7d7hkjwha50mg2522zj3hjv05c7","tb1qt54vrrq4jrzrvusuuyzx329w99ztg3zfnhqy63","tb1quhuunfwlhupdjp5vw63jsvk4psygwnz2np0235","tb1q98r4pg35khfhw6nvxkqaumx0ezrfrv28ph5xp0","tb1qr8uh996cqrnfdp0j08xa7x4qldzsry8dhu635u","tb1qrp70zs9x4tddk0l7f467vnuqccmyx4km4utu39","tb1q7ucja4pzvuez46rvevnh5zgxt8h0qtjxad9swu","tb1q4vwrap2av85d9e0tf6vtwqsjanzwhy744mdt0u","tb1q5hf2zrlkm3vs5eexyfn9jcqsycv2lgd5ecj237","tb1qd8dnwxdjjmryz7drlwsey46a5mf340ve7jakp0","tb1qd363u698c4dtzs9wphhn84gqlmcyvjjmdr3zl7","tb1qfnaz6hx6qd2w8kkd9mwjzvpa8ya966rv2dzds4","tb1qdu4y3y577vrgq7xvfchwf7rg0fsq87d7w6jc8f","tb1qvywnawemyf78upvh4p56jdgjf4ewddw8vkesfr","tb1qg0hxdgnruk8fmhg7ctvej74jaxgk0hzapepudd","tb1q0h54rdfvq23genyqte6xwl9pne3pruxv0jd894","tb1qh6pvzkc3lk3x773vkxzqc0rkehycag6cmjeywc","tb1qte8hcc5q3m4qh2geme4tpny4g5ssy0fgfae7vf","tb1q5wedn3xguswt94ngyf69crmh6pjuakpvrp0qwa","tb1qvpm4llr2q9fle7arfu8ls42gavetlaqr2t90gk","tb1qwxw2jvchghchet2dtl5wghu5d8vdy3wezmlsn3","tb1qzx6eewvzd3jhjfxtaxpfc807tr07t84422e4f5","tb1qajtw95xgunhee6zr5myh6qg3crumqqeaaz4kpg","tb1q85an5gplk74s36yza520qy976s9z3hfvpzacg3","tb1q3l87mp38fa3kr366cu8vsf3v8kaw02fjllwj88","tb1qnsdlh8cynxsxmtdm60xxpj2x5qr7c5t3uwd89c","tb1qehxuturxvgtuhv7329uypwhv2ev3n84kt9655c","tb1qlvvxyxz6k3z2m3qy4vzd92ee4yndp2ffe42mum","tb1ql3h3rg6xauzgkpzneapea9rnqmjfqu2zqnqfw2","tb1qwnrhwykwh6zyck5jc7386m397avzxl353zatve","tb1qcjwqv45ayq9970m3kdflrrxluz9v7m6pr42lqv","tb1qs0nwlqyujxc8lu8dhf4fjyv9mumh7v3rumahka","tb1qyweetgycv0v66pts8wcxkjtvmtwge25cdz4mnt","tb1qkefsdsne6meea9v5a97zwd6pnrc6kr647r7erq","tb1qkgts0vdu9k0ss0hn4urvuanpwkmga8qkf3qztv","tb1qts0ukwg925eetc3dpvk8d526twwrgmgaakmg6a","tb1q627xyatdlpv0f83lzg9u9uz73uqdjr32renk2f","tb1qnn6t0j4cumgt8qpxs9dcgf9d99mmmqnz9yl6qj","tb1q5cdppu6zk2zxqshctk4pcgfkf4dy5w263advwd","tb1qqxq4tkvzuhzzuvp728whh2pjhmh67c2x5svq90","tb1qgn609emj4qs752307pfdardl8h7vywpvl9yufn","tb1q4t353yrl8k4sgwq2ws9837z7d03txdn726fjys","tb1qdjl28xqrkr7uhzu3kmknnl8jqvaewrf875vtk5"]}',
			)
			.reply(
				200,
				'{"data":{"tb1qp2c7hrs54lzyhl9725tkyxrwhw4utfucagjk62":true,"tb1q28sfszezu2m897hru9d74dh7ymuufq3qreqe74":false,"tb1qggv0a06dyl0y5wtfp0ng4ldx3e7l05z7vhha9u":false,"tb1q0clqkpstx6kqtc7pcjsq5gqsvvzru2hw23dgft":false,"tb1qp37xzafn5raf0sy9wtk6x4gn65ryrzsuy392cq":false,"tb1qhhptumtv9t2arzqpsjekwxcfr8yxsrmzaelqtm":false,"tb1q5363t2jk5p52wul33vv5pqpdy8kzf34n8hjxqy":false,"tb1qfcauqmu53wenn08lz8vn8r3d05m4pw0t2jva2a":false,"tb1q2knjf7qw6q2evn3lffrrw48rpg5s0w08xs7mjh":false,"tb1q0nahjdqxdghwtk9fwl8w58pe63dcf2ddqc2ujh":false,"tb1qsfksc08negtpm3u5mdysxza9zavlr3psurj40y":false,"tb1q0wumuaw6z536nmut807cag8ptef607asggdx7u":false,"tb1qex89rll2enrvn739t5xdt0nw8sk4td4j2n20sv":false,"tb1ql2yss43fejy2ex05d7www8mvqvp4t5p66ccm30":false,"tb1qjct7ymngtq6qqrlps0q28gu8qfrpyuxc7f9quz":false,"tb1q5j6htpxkwyxqdakjk4hwpc5h8ynty7sel5035v":false,"tb1qkljlrleglask3ncx5djerqr8gygnnmgj36wf7h":false,"tb1qu7pmw9jkzs290q60ltqqzpq55gfrytzsywnuf3":false,"tb1qdzxs3weadduze3ul20rrpy5tqzqse3ht9s0llh":false,"tb1qcuccs8rxevallss7hkaxkudhxfspwyfcv6sq6m":false,"tb1q2zwpvk4pqmytk4rr0ylcg69xly77pmkxnsnlr5":false,"tb1qwm7sjjuh048acz9pz3jqffxadqyymnlmz0yw8e":false,"tb1q3x5888nyxeee7pn85vv74m837zh6ken48naqaa":false,"tb1q40374m9wdv6q4zugg50mvtpa6j03qnlcrszypg":false,"tb1q7pnj7nhh5jrj2nq2hx5qxxeq5hprqe53pg9k2k":false,"tb1ql9ulx4zagx5p9xzd2epjm34m9x4jezn4ueq669":false,"tb1q3pnh9qyaej8rn6zqtgghlxlzmfj0453dspgxzd":false,"tb1qvh0a2gru9j82judjh6rfnsgy4ws0m2293agney":false,"tb1q0nfp7q77nfre8uvvn0ket06w9yaydvpz68p9lr":false,"tb1q04dwnzx83sme2rfln6w4vpmggwjjchjxr8zkx9":false,"tb1qf0tdj68uyzqly3w5en9drqwnz6sa4n6lsk476s":false,"tb1qk8qr5y642jgkhculch3e6pc6v0xge0arnldxmt":false,"tb1qdv5xh4j4njfjuqeqdj2dmhvswvehelayx4m7ym":false,"tb1qpu9scl04pk4j7q7u9vdfz8un2673eh0qy4l0eg":false,"tb1qpsjyh7t7csr8rj2cysyacprtlewp970zerkeza":false,"tb1qqfuy3340a9adthlsw8vhqn60ywcts9pshaetfv":false,"tb1q6kjamng3eguc9xrnslvj3akt22h7lmmjq852vy":false,"tb1qlkdemrc9xu4afg3p8x0zk4c9s7l2d7v726wsrr":false,"tb1qrvus8qlt99zk4yfkd3uvxec4ply8fg0vrdrl3e":false,"tb1qsr5ffrwzgfagrwjyq2pv2srnsefv2edmsvgqwm":false,"tb1qltxv5ms98khhhd2yrkuyeus4sqa5dn8227rgkq":false,"tb1qwacalyc95ap53kuljed28cvwu2sejs7h266k7k":false,"tb1qnv4qmkgpfhyadf9j6wr652nwe99h3seqwmqx7y":false,"tb1qnn7vpp59njhgc38c6utfjzqrnlchcl039yfnhn":false,"tb1qulwap6w2dymnnamfn4tn628l30m6dz40md2kxt":false,"tb1qxns6lceznfjyez4t0e68xl3h6n4dxe57k6h0qa":false,"tb1qejk3882duegrcgl4wzyk4w536ht0fctpmv5rn4":false,"tb1qsthnlj3wfsrvj72pe8w6fsqu4e8nksp05s06sw":false,"tb1qrrwgq7vuawyyk2hj6s9waezj80utrfqugays6g":false,"tb1q97uyjqdm7za7pcyhtu2873vdhemt5u0jl9vd7d":false,"tb1q4hflrpz7c3zradl5ehewhk8smh68jjtpufkhc9":false,"tb1qrsr6k3sn9zwujrlg3pfzp07mwz80qjtrx2yw6z":false,"tb1q08al65sd77pjump4nxycag4w3n4fp63d2smvj3":false,"tb1q62fmnhzpywj7gt8d8amaztc3d9u7ny9m3g7ze8":false,"tb1qgcn3ltjacdmc6ugayt74axl8xg4pz666pw8973":false,"tb1q9fhq04hsxscntfeywv798d9ay3qvw5c7shfn2y":false,"tb1q4f3w2glv82ap822mn8g6tx8qslyjvuaupkj5p6":false,"tb1qr57sat8g3vu7d7hkjwha50mg2522zj3hjv05c7":false,"tb1qt54vrrq4jrzrvusuuyzx329w99ztg3zfnhqy63":false,"tb1quhuunfwlhupdjp5vw63jsvk4psygwnz2np0235":false,"tb1q98r4pg35khfhw6nvxkqaumx0ezrfrv28ph5xp0":false,"tb1qr8uh996cqrnfdp0j08xa7x4qldzsry8dhu635u":false,"tb1qrp70zs9x4tddk0l7f467vnuqccmyx4km4utu39":false,"tb1q7ucja4pzvuez46rvevnh5zgxt8h0qtjxad9swu":false,"tb1q4vwrap2av85d9e0tf6vtwqsjanzwhy744mdt0u":false,"tb1q5hf2zrlkm3vs5eexyfn9jcqsycv2lgd5ecj237":false,"tb1qd8dnwxdjjmryz7drlwsey46a5mf340ve7jakp0":false,"tb1qd363u698c4dtzs9wphhn84gqlmcyvjjmdr3zl7":false,"tb1qfnaz6hx6qd2w8kkd9mwjzvpa8ya966rv2dzds4":false,"tb1qdu4y3y577vrgq7xvfchwf7rg0fsq87d7w6jc8f":false,"tb1qvywnawemyf78upvh4p56jdgjf4ewddw8vkesfr":false,"tb1qg0hxdgnruk8fmhg7ctvej74jaxgk0hzapepudd":false,"tb1q0h54rdfvq23genyqte6xwl9pne3pruxv0jd894":false,"tb1qh6pvzkc3lk3x773vkxzqc0rkehycag6cmjeywc":false,"tb1qte8hcc5q3m4qh2geme4tpny4g5ssy0fgfae7vf":false,"tb1q5wedn3xguswt94ngyf69crmh6pjuakpvrp0qwa":false,"tb1qvpm4llr2q9fle7arfu8ls42gavetlaqr2t90gk":false,"tb1qwxw2jvchghchet2dtl5wghu5d8vdy3wezmlsn3":false,"tb1qzx6eewvzd3jhjfxtaxpfc807tr07t84422e4f5":false,"tb1qajtw95xgunhee6zr5myh6qg3crumqqeaaz4kpg":false,"tb1q85an5gplk74s36yza520qy976s9z3hfvpzacg3":false,"tb1q3l87mp38fa3kr366cu8vsf3v8kaw02fjllwj88":false,"tb1qnsdlh8cynxsxmtdm60xxpj2x5qr7c5t3uwd89c":false,"tb1qehxuturxvgtuhv7329uypwhv2ev3n84kt9655c":false,"tb1qlvvxyxz6k3z2m3qy4vzd92ee4yndp2ffe42mum":false,"tb1ql3h3rg6xauzgkpzneapea9rnqmjfqu2zqnqfw2":false,"tb1qwnrhwykwh6zyck5jc7386m397avzxl353zatve":false,"tb1qcjwqv45ayq9970m3kdflrrxluz9v7m6pr42lqv":false,"tb1qs0nwlqyujxc8lu8dhf4fjyv9mumh7v3rumahka":false,"tb1qyweetgycv0v66pts8wcxkjtvmtwge25cdz4mnt":false,"tb1qkefsdsne6meea9v5a97zwd6pnrc6kr647r7erq":false,"tb1qkgts0vdu9k0ss0hn4urvuanpwkmga8qkf3qztv":false,"tb1qts0ukwg925eetc3dpvk8d526twwrgmgaakmg6a":false,"tb1q627xyatdlpv0f83lzg9u9uz73uqdjr32renk2f":false,"tb1qnn6t0j4cumgt8qpxs9dcgf9d99mmmqnz9yl6qj":false,"tb1q5cdppu6zk2zxqshctk4pcgfkf4dy5w263advwd":false,"tb1qqxq4tkvzuhzzuvp728whh2pjhmh67c2x5svq90":false,"tb1qgn609emj4qs752307pfdardl8h7vywpvl9yufn":false,"tb1q4t353yrl8k4sgwq2ws9837z7d03txdn726fjys":false,"tb1qdjl28xqrkr7uhzu3kmknnl8jqvaewrf875vtk5":false}}',
			)
			.post(
				"/api/wallets/transactions/unspent",
				'{"addresses":["tb1qwzwugs68sv2f8svsuredhr8ddvnc8tksef5yz3","tb1qtxjg2tzzza7lr60cxadpkp0cuv5zt07h0r2hxs","tb1qp2c7hrs54lzyhl9725tkyxrwhw4utfucagjk62"]}',
			)
			.reply(
				200,
				'{"data":[{"address":"tb1qp2c7hrs54lzyhl9725tkyxrwhw4utfucagjk62","txId":"a8ce11e894c7f5178d086584486efb836432c9e7eb1a7030aa4d3a4e39cdb394","outputIndex":1,"script":"00140ab1eb8e14afc44bfcbe551762186ebbabc5a798","satoshis":69854},{"address":"tb1qtxjg2tzzza7lr60cxadpkp0cuv5zt07h0r2hxs","txId":"1e5d87c6d39346c50a71b48072b95c8e1618d0051d00c1b004d692a26a41c5ad","outputIndex":0,"script":"001459a4852c42177df1e9f8375a1b05f8e32825bfd7","satoshis":40000}],"links":{"first":"https:\\/\\/btc-test.arkvault.io\\/api\\/wallets\\/transactions\\/unspent?page=1","last":"https:\\/\\/btc-tearkvault.iohq.com\\/api\\/wallets\\/transactions\\/unspent?page=1","prev":null,"next":null},"meta":{"current_page":1,"from":1,"last_page":1,"links":[{"url":null,"label":"&laquo; Previous","active":false},{"url":"https:\\/\\/btcarkvault.ioenthq.com\\/api\\/wallets\\/transactions\\/unspent?page=1","label":"1","active":true},{"url":null,"label":"Next &raquo;","active":false}],"path":"https:\\/\\/arkvault.ioarkvault.io\\/api\\/wallets\\/transactions\\/unspent","per_page":15,"to":2,"total":2}}',
			)
			.post(
				"/api/wallets/transactions/raw",
				'{"transaction_ids":["a8ce11e894c7f5178d086584486efb836432c9e7eb1a7030aa4d3a4e39cdb394","1e5d87c6d39346c50a71b48072b95c8e1618d0051d00c1b004d692a26a41c5ad"]}',
			)
			.reply(
				200,
				'{"data":{"a8ce11e894c7f5178d086584486efb836432c9e7eb1a7030aa4d3a4e39cdb394":"010000000001011e28480a71d4bb1eafa75eb082fd97926c6542afd15678c98d1eca0a91b43a2a0000000000000000000230750000000000001976a91488941076e6adf6063892bf338783f805d582c9b388acde100100000000001600140ab1eb8e14afc44bfcbe551762186ebbabc5a7980247304402204b53cdb65d9604fd997d90106476aa8b72d1c8042d1e9a7c0248646a0cfdf53f02200802246764b7cc125c2180f5738d962a12373de554ed27cedcadab18cf1febe7012102823b744a0a42c15851c1d8cd6415a792474dad4a401d997f96c7185985164e2d00000000","1e5d87c6d39346c50a71b48072b95c8e1618d0051d00c1b004d692a26a41c5ad":"01000000000101d4e042fb27460be8d962578bf183d11a348517ea8a601e0395bfeaaac96e2942010000001716001471897d984468d8fb600b2eba60ee3d737c90ea6b0000000002409c00000000000016001459a4852c42177df1e9f8375a1b05f8e32825bfd7b8e900000000000017a9143583ca9ecbbc0243c04bb32a5c91dde5c131fc328702483045022100a3bbfb14c02491d4dd82529ce5d6022577dd4f02dcc0c0a58199f0c3ef0038e502205b8b97fe2fa274cf376f3b1b48e2630ce597d0e8975087e14c41e91382841b3d0121038bd2835af1ed447588b19d896ed4c550084bb3dc5f5e6b4998ed8b4774962f2900000000"}}',
			)
			.get("/api/fees")
			.reply(200, {
				data: {
					avg: 0.000_000_1,
					max: 0.001_806_17,
					min: 0.000_010_74,
				},
			})
			.persist();
	});

	it("should generate and sign a transfer transaction", async () => {
		const signatory = new Signatories.Signatory(
			new Signatories.LedgerSignatory({
				options: {
					bip84: {
						account: 0,
					},
				},
				signingKey: "doesn't matter",
			}),
		);

		const result = await configureMock(ledger.transfers.bip84.record).transfer({
			data: {
				amount: 0.001_04,
				to: "mvVAfs3MCDYg7HokDhL6pPuef6KZLPdUUz",
			},
			signatory,
		});

		assert.is(
			result.toBroadcast(),
			"0100000000010294b3cd394e3a4daa30701aebe7c9326483fb6e488465088d17f5c794e811cea80100000000ffffffffadc5416aa292d604b0c1001d05d018168e5cb97280b4710ac54693d3c6875d1e0000000000ffffffff0240960100000000001976a914a43362c51b5ab6b2476c55e0a88452533e1a155a88ac2e0d00000000000016001451e0980b22e2b672fae3e15beab6fe26f9c4822002483045022100a6a44bf6f2ecbdb22e092003db0f092653cf62864bccbe5d47a32aa576f9157102206602bce2f2363dc7479b6456a90085becb8d65c262df97f7054958bc840dd2bd0121023764fe32c78a9dea4cfdcf4682f0992d2724d65507dfe840d9f63a39dbe767c402483045022100f8c9162c3eaceb5298370cb218e959920e7bb2efe0e84615cc5714843dfbd50302205b2d0122c0c1a6cb6021827b69b35fa6b2ba6c72e2daf784eec6e326617c6d86012103ef85b0f883dbcfe5af7620703d5c3b810eb0ebf462102cd33ecd2f610dec6ede00000000",
		);
		assert.is(result.id(), "9eb92ee5952182e1c9a4602d72792024e9324220ed21344d55052fb01e3a0f19");
		assert.is(result.sender(), "tb1qwzwugs68sv2f8svsuredhr8ddvnc8tksef5yz3");
		assert.is(result.recipient(), "mvVAfs3MCDYg7HokDhL6pPuef6KZLPdUUz");
		assert.is(result.amount().toNumber(), 104_000);
		assert.is(result.fee().toNumber(), 2480);
		assert.instance(result.timestamp(), DateTime);
	});
});
